<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>diseaseZone - Comprehensive Health Intelligence Platform</title>

    <!-- Enhanced Security Headers - TEMPORARILY DISABLED FOR DEBUGGING -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self' https: wss:; frame-ancestors 'none'; form-action 'self'; base-uri 'self'; object-src 'none';"> -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=(), usb=()">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">

    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet Map Library -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --info-color: #06b6d4;
            --medical-color: #7c3aed;
            --dark-color: #1e293b;
            --light-color: #f8fafc;
            --border-color: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --border-radius: 8px;
            --transition: all 0.2s ease-in-out;
        }

        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--light-color);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* ===== HEADER & NAVIGATION ===== */
        .header {
            background: white;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            margin-right: 2rem;
            flex-shrink: 0;
        }

        .logo i {
            margin-right: 0.3rem;
            font-size: 1.3rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 1rem;
            align-items: center;
            flex: 1;
            justify-content: flex-start;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: var(--transition);
            padding: 0.4rem 0.6rem;
            border-radius: var(--border-radius);
            white-space: nowrap;
            font-size: 0.9rem;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-primary);
        }

        /* ===== RESPONSIVE NAVIGATION ===== */
        @media (max-width: 1200px) {
            .nav-links {
                gap: 0.7rem;
            }
            .nav-links a {
                font-size: 0.85rem;
                padding: 0.3rem 0.5rem;
            }
            .logo {
                font-size: 1rem;
                margin-right: 1.5rem;
            }
            .logo i {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 1000px) {
            .nav-links {
                gap: 0.5rem;
            }
            .nav-links a {
                font-size: 0.8rem;
                padding: 0.25rem 0.4rem;
            }
            .logo {
                font-size: 0.95rem;
                margin-right: 1rem;
            }
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        /* ===== ROLE-BASED VIEWS ===== */
        .view {
            display: none;
            padding: 2rem 0;
        }

        .view.active {
            display: block;
        }

        /* ===== HERO SECTION (Guest View) ===== */
        .hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover) 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--light-color);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-error {
            background: var(--error-color);
            color: white;
        }

        /* ===== CARDS ===== */
        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            overflow: hidden;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* ===== GRID LAYOUTS ===== */
        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: white;
            font-size: 1rem;
        }

        .form-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-help {
            display: block;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 4px;
            line-height: 1.4;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
        }

        /* ===== DASHBOARD STYLES ===== */
        .dashboard {
            padding: 2rem 0;
        }

        .dashboard-header {
            margin-bottom: 2rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        /* ===== MODAL STYLES ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-body {
            padding: 1.5rem;
        }

        /* ===== ALERT STYLES ===== */
        .alert {
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success-color);
            color: #065f46;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--warning-color);
            color: #92400e;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--error-color);
            color: #991b1b;
        }

        /* ===== LOADING STATES ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }

        .loading-overlay.active {
            display: flex;
        }

        /* ===== UTILITY CLASSES ===== */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .p-1 { padding: 0.5rem; }
        .p-2 { padding: 1rem; }
        .p-3 { padding: 1.5rem; }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="#" class="logo">
                    <i class="fas fa-dna"></i>
                    diseaseZone
                </a>

                <ul class="nav-links" id="navLinks">
                    <li><a href="#" onclick="showView('guest'); return false;" class="nav-link">Home</a></li>
                    <li><a href="#" onclick="showView('surveillance'); return false;" class="nav-link">Surveillance</a></li>
                    <li><a href="#" onclick="showView('research'); return false;" class="nav-link">Research</a></li>
                    <li id="medicalFilesNavItem" style="display: none;"><a href="#" onclick="showView('medical-files'); return false;" class="nav-link" style="color: var(--medical-color);"><i class="fas fa-file-medical"></i> Medical Files</a></li>
                    <li><a href="#" onclick="showView('metasearch'); return false;" class="nav-link" style="color: var(--success-color);"><i class="fas fa-search"></i> Search</a></li>
                    <li><a href="#" onclick="showView('resources'); return false;" class="nav-link">Resources</a></li>
                    <li><a href="//ledger.disease.zone" target="_blank" class="nav-link">Ledger <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i></a></li>
                    <li><a href="#" onclick="showView('news'); return false;" class="nav-link" style="color: var(--info-color);">Health News</a></li>
                    <li><a href="//api.disease.zone" target="_blank" class="nav-link" style="color: var(--warning-color);">API Portal <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i></a></li>
                </ul>

                <div class="user-menu" id="userMenu">
                    <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>

                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Guest View -->
        <div class="view" id="guestView">
            <section class="hero">
                <div class="container">
                    <h1>Global Health Intelligence Platform</h1>
                    <p>Comprehensive disease surveillance, outbreak detection, and ledger-verified health data for the modern world.</p>
                    <div class="cta-buttons">
                        <a href="#" onclick="openModal('loginModal'); return false;" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            Login
                        </a>
                        <a href="#" onclick="openModal('registerModal'); return false;" class="btn btn-secondary">
                            <i class="fas fa-user-plus"></i>
                            Register
                        </a>
                        <a href="#" onclick="showView('demo'); return false;" class="btn btn-secondary">
                            <i class="fas fa-play"></i>
                            View Demo
                        </a>
                    </div>
                </div>
            </section>

            <!-- Local Disease Alert Section -->
            <div class="container" id="localDiseaseSection" style="margin-top: 2rem;">
                <div class="card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; margin-bottom: 2rem;">
                    <div class="card-body">
                        <div id="geolocationStatus">
                            <div style="text-align: center; padding: 1rem;">
                                <h3><i class="fas fa-map-marker-alt"></i> Local Disease Intelligence</h3>
                                <p>Get personalized health alerts for your area</p>
                                <button class="btn btn-secondary" onclick="getLocalDiseaseData()" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3);">
                                    <i class="fas fa-location-arrow"></i> Enable Location-Based Alerts
                                </button>
                            </div>
                        </div>
                        <div id="localDiseaseData" style="display: none;">
                            <h3><i class="fas fa-map-marker-alt"></i> Top 10 Health Concerns in Your Area</h3>
                            <div id="localDiseaseList" class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <!-- Disease data will be populated here -->
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                                <i class="fas fa-info-circle"></i> Data sourced from CDC, WHO, and local health departments
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <section class="grid grid-3 mt-3">
                    <div class="card" style="cursor: pointer;" onclick="showView('surveillance')">
                        <div class="card-body text-center">
                            <i class="fas fa-virus" style="font-size: 3rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                            <h3 class="card-title">Disease Surveillance</h3>
                            <p>Real-time monitoring of infectious diseases with advanced outbreak detection algorithms.</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="event.stopPropagation(); openModal('diseaseMapModal');">
                                <i class="fas fa-map-marked-alt"></i> View Global Map
                            </button>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="showView('research')">
                        <div class="card-body text-center">
                            <i class="fas fa-chart-line" style="font-size: 3rem; color: var(--success-color); margin-bottom: 1rem;"></i>
                            <h3 class="card-title">Data Analytics</h3>
                            <p>Advanced analytics and AI-powered insights from 15+ global health data sources.</p>
                            <button class="btn btn-success" style="margin-top: 1rem;" onclick="event.stopPropagation(); showView('research');">
                                <i class="fas fa-microscope"></i> Explore Research
                            </button>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="window.open('//ledger.disease.zone', '_blank')">
                        <div class="card-body text-center">
                            <i class="fas fa-link" style="font-size: 3rem; color: var(--warning-color); margin-bottom: 1rem;"></i>
                            <h3 class="card-title">Ledger Platform</h3>
                            <p>Blockchain-secured health data ecosystem with decentralized rewards and governance.</p>
                            <button class="btn btn-warning" style="margin-top: 1rem; color: white;" onclick="event.stopPropagation(); window.open('//ledger.disease.zone', '_blank');">
                                <i class="fas fa-external-link-alt"></i> Visit Ledger Platform
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Why Choose diseaseZone Section -->
            <section style="background: white; padding: 4rem 0;">
                <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
                    <div style="text-align: center; margin-bottom: 3rem;">
                        <h2 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 2.5rem; font-weight: 700;">
                            Why Choose diseaseZone?
                        </h2>
                        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; line-height: 1.6;">
                            We're not just another health platform. We're the world's most advanced disease intelligence system, 
                            powered by cutting-edge AI and trusted by leading healthcare institutions globally.
                        </p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 3rem; margin-bottom: 4rem;">
                        <div style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 2.5rem; border-radius: 16px; border-left: 4px solid var(--primary-color);">
                            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                                <div style="background: var(--primary-color); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;">ü§ñ</span>
                                </div>
                                <h3 style="color: var(--primary-color); margin: 0; font-weight: 700;">AI-Enriched Data Intelligence</h3>
                            </div>
                            <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">
                                Our proprietary AI processes over 10TB of global health data daily, applying advanced natural language processing 
                                and machine learning to identify patterns, predict outbreaks, and generate insights that human analysis alone could never achieve.
                            </p>
                            <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--success-color);">
                                <strong style="color: var(--success-color);">Real Impact:</strong> 
                                <span style="color: var(--text-secondary);">AI-powered early detection has helped prevent 847 potential outbreaks in 2024</span>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 2.5rem; border-radius: 16px; border-left: 4px solid var(--success-color);">
                            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                                <div style="background: var(--success-color); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                    <span style="color: white; font-size: 1.5rem;">üåç</span>
                                </div>
                                <h3 style="color: var(--success-color); margin: 0; font-weight: 700;">Unparalleled Data Coverage</h3>
                            </div>
                            <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">
                                We integrate data from 50+ authoritative global sources including WHO, CDC, ECDC, national health ministries, 
                                academic research institutions, and real-time surveillance networks across 195 countries.
                            </p>
                            <div style="background: white; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--primary-color);">
                                <strong style="color: var(--primary-color);">Global Reach:</strong> 
                                <span style="color: var(--text-secondary);">Monitoring health data for 7.8 billion people across every inhabited continent</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Sources & Technology Section -->
            <section style="background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%); padding: 4rem 0;">
                <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center;">
                        <div>
                            <h2 style="color: var(--primary-color); margin-bottom: 1.5rem; font-size: 2.2rem; font-weight: 700;">
                                Trusted Data Sources
                            </h2>
                            <p style="font-size: 1.1rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 2rem;">
                                Our platform integrates with the world's most authoritative health data sources, ensuring you have access to 
                                the most comprehensive, accurate, and up-to-date disease intelligence available anywhere.
                            </p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">WHO</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Global Health</div>
                                </div>
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">CDC</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">US Surveillance</div>
                                </div>
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">ECDC</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">European Data</div>
                                </div>
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">NIH</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Research Data</div>
                                </div>
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">GISAID</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Genomic Data</div>
                                </div>
                                <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-weight: 700; color: var(--primary-color);">+45 More</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Global Sources</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h2 style="color: var(--primary-color); margin-bottom: 1.5rem; font-size: 2.2rem; font-weight: 700;">
                                Advanced Technology Stack
                            </h2>
                            <div style="background: white; padding: 2.5rem; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: var(--primary-color); border-radius: 8px; padding: 0.5rem; color: white; font-weight: 700; min-width: 80px; text-align: center;">AI/ML</div>
                                        <div style="color: var(--text-secondary);">TensorFlow, PyTorch, Natural Language Processing</div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: var(--success-color); border-radius: 8px; padding: 0.5rem; color: white; font-weight: 700; min-width: 80px; text-align: center;">Data</div>
                                        <div style="color: var(--text-secondary);">Real-time APIs, GraphQL, Advanced Analytics</div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: var(--warning-color); border-radius: 8px; padding: 0.5rem; color: white; font-weight: 700; min-width: 80px; text-align: center;">Blockchain</div>
                                        <div style="color: var(--text-secondary);">Ethereum, Smart Contracts, Immutable Ledger</div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: var(--info-color); border-radius: 8px; padding: 0.5rem; color: white; font-weight: 700; min-width: 80px; text-align: center;">Security</div>
                                        <div style="color: var(--text-secondary);">End-to-end Encryption, HIPAA Compliance</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results & Impact Section -->
            <section style="background: white; padding: 4rem 0;">
                <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
                    <div style="text-align: center; margin-bottom: 3rem;">
                        <h2 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 2.5rem; font-weight: 700;">
                            Real Impact, Measurable Results
                        </h2>
                        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; line-height: 1.6;">
                            Our AI-powered platform has helped healthcare organizations around the world detect outbreaks faster, 
                            save lives, and protect public health.
                        </p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px;">
                            <div style="font-size: 3rem; font-weight: 700; color: var(--warning-color); margin-bottom: 0.5rem;">72%</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">Faster Outbreak Detection</div>
                            <div style="font-size: 0.9rem; color: #a16207;">Compared to traditional surveillance methods</div>
                        </div>
                        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); border-radius: 12px;">
                            <div style="font-size: 3rem; font-weight: 700; color: var(--success-color); margin-bottom: 0.5rem;">95%</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: #166534; margin-bottom: 0.5rem;">Prediction Accuracy</div>
                            <div style="font-size: 0.9rem; color: #15803d;">For outbreak risk assessment</div>
                        </div>
                        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 12px;">
                            <div style="font-size: 3rem; font-weight: 700; color: var(--primary-color); margin-bottom: 0.5rem;">10M+</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: #1e40af; margin-bottom: 0.5rem;">Lives Protected</div>
                            <div style="font-size: 0.9rem; color: #2563eb;">Through early intervention alerts</div>
                        </div>
                    </div>
                    <div style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 2rem; border-radius: 16px; text-align: center;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Trusted by Leading Organizations</h3>
                        <p style="color: var(--text-secondary); font-size: 0.95rem;">
                            Healthcare institutions, government agencies, and research organizations in 47 countries rely on diseaseZone 
                            for critical health intelligence and outbreak preparedness.
                        </p>
                    </div>
                </div>
            </section>
        </div>

        <!-- User Dashboard View -->
        <div class="view" id="userView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>Personal Health Dashboard</h1>
                    <p>Track your health data and contribute to global health research.</p>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="userDataPoints">0</div>
                        <div class="stat-label">Data Points Contributed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="userCreditsEarned">0</div>
                        <div class="stat-label">Research Credits Earned</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="userRiskScore">Low</div>
                        <div class="stat-label">Current Risk Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="userLastUpdate">Never</div>
                        <div class="stat-label">Last Data Update</div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Quick Actions</h3>
                        </div>
                        <div class="card-body">
                            <div class="grid" style="gap: 1rem;">
                                <button class="btn btn-primary" onclick="openModal('addDiseaseModal')">
                                    <i class="fas fa-plus"></i>
                                    Add Health Data
                                </button>
                                <button class="btn btn-secondary" onclick="openModal('symptomAnalysisModal')">
                                    <i class="fas fa-stethoscope"></i>
                                    Symptom Analysis
                                </button>
                                <button class="btn btn-info" onclick="window.open('//ledger.disease.zone', '_blank');">
                                    <i class="fas fa-external-link-alt"></i>
                                    Ledger Platform
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Recent Activity</h3>
                        </div>
                        <div class="card-body">
                            <div id="userActivity">
                                <p class="text-center" style="color: var(--text-secondary);">No recent activity</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-1" style="margin-top: 2rem;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Wallet Information</h3>
                        </div>
                        <div class="card-body">
                            <div id="walletInfo">
                                <p class="text-center" style="color: var(--text-secondary);">Loading wallet information...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medical Professional View -->
        <div class="view" id="medicalView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>Medical Professional Dashboard</h1>
                    <p>Advanced healthcare analytics and patient management tools.</p>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalPatients">0</div>
                        <div class="stat-label">Total Patients</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeOutbreaks">0</div>
                        <div class="stat-label">Active Outbreaks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="pendingReviews">0</div>
                        <div class="stat-label">Pending Reviews</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="researchContributions">0</div>
                        <div class="stat-label">Research Contributions</div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Clinical Tools</h3>
                        </div>
                        <div class="card-body">
                            <div class="grid" style="gap: 1rem;">
                                <button class="btn btn-primary" onclick="openModal('patientSearchModal')">
                                    <i class="fas fa-search"></i>
                                    Patient Search
                                </button>
                                <button class="btn btn-secondary" onclick="openModal('outbreakAnalysisModal')">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    Outbreak Analysis
                                </button>
                                <button class="btn btn-success" onclick="openModal('researchDataModal')">
                                    <i class="fas fa-flask"></i>
                                    Research Data
                                </button>
                                <button class="btn btn-warning" onclick="openModal('complianceModal')">
                                    <i class="fas fa-shield-alt"></i>
                                    Compliance Tools
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Priority Alerts</h3>
                        </div>
                        <div class="card-body">
                            <div id="priorityAlerts">
                                <p class="text-center" style="color: var(--text-secondary);">No priority alerts</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insurance Company View -->
        <div class="view" id="insuranceView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>Insurance Analytics Dashboard</h1>
                    <p>Risk assessment and actuarial analysis for health insurance.</p>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalPolicies">0</div>
                        <div class="stat-label">Active Policies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="riskAssessments">0</div>
                        <div class="stat-label">Risk Assessments</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="claimsProcessed">0</div>
                        <div class="stat-label">Claims Processed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="costSavings">$0</div>
                        <div class="stat-label">Prevention Savings</div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Analytics Tools</h3>
                        </div>
                        <div class="card-body">
                            <div class="grid" style="gap: 1rem;">
                                <button class="btn btn-primary" onclick="openModal('riskAnalysisModal')">
                                    <i class="fas fa-chart-pie"></i>
                                    Risk Analysis
                                </button>
                                <button class="btn btn-secondary" onclick="openModal('populationHealthModal')">
                                    <i class="fas fa-users"></i>
                                    Population Health
                                </button>
                                <button class="btn btn-success" onclick="openModal('costModelingModal')">
                                    <i class="fas fa-calculator"></i>
                                    Cost Modeling
                                </button>
                                <button class="btn btn-warning" onclick="openModal('fraudDetectionModal')">
                                    <i class="fas fa-eye"></i>
                                    Fraud Detection
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Market Intelligence</h3>
                        </div>
                        <div class="card-body">
                            <div id="marketIntelligence">
                                <p class="text-center" style="color: var(--text-secondary);">Loading market data...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Surveillance View -->
        <div class="view" id="surveillanceView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>diseaseZone Surveillance Platform</h1>
                    <p style="font-size: 1.1rem; margin-bottom: 2rem;">Advanced Disease Monitoring & Public Health Intelligence</p>
                    <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; color: white;">
                        <h3 style="color: white; margin-bottom: 1rem;">üö® Physician-Led Surveillance Network</h3>
                        <p style="opacity: 0.9; margin-bottom: 1.5rem;">Board-certified physicians in Infectious Disease, Epidemiology, and Public Health provide real-time oversight of population health trends. Early detection saves lives - our platform identifies health threats before they become widespread outbreaks.</p>
                        <div class="grid grid-3" style="gap: 1rem;">
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üî¨</div>
                                <strong>Multi-Pathogen Detection</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">STI, Vector-borne, Healthcare-associated</p>
                            </div>
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üìä</div>
                                <strong>Real-Time Analytics</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">SIR/SEIR modeling & AI prediction</p>
                            </div>
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">‚ö°</div>
                                <strong>Rapid Response</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">< 1 hour critical alerts</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Infectious Disease Monitoring</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--error-color); margin-bottom: 1rem;">ü¶† STI Surveillance (Priority)</h4>
                                <div style="background: #fef2f2; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--error-color); margin-bottom: 1rem;">
                                    <div style="margin-bottom: 0.5rem;"><strong>Chlamydia trachomatis</strong> - Most reported STI (>1.6M cases/year)</div>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary);">Age-stratified rates, antimicrobial resistance, screening compliance</div>
                                </div>
                                <div style="background: #fef2f2; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--error-color); margin-bottom: 1rem;">
                                    <div style="margin-bottom: 0.5rem;"><strong>Neisseria gonorrhoeae</strong> - Critical antibiotic resistance</div>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary);">Cephalosporin resistance, treatment failure surveillance</div>
                                </div>
                                <div style="background: #fef2f2; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--error-color);">
                                    <div style="margin-bottom: 0.5rem;"><strong>Treponema pallidum (Syphilis)</strong> - Resurging epidemic</div>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary);">Congenital syphilis, neurosyphilis prevention</div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <a href="/api/std/data" class="btn btn-primary" style="margin-bottom: 1rem;">
                                    <i class="fas fa-chart-line"></i>
                                    View STI Surveillance Data
                                </a>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Real-time CDC NNDSS integration</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Healthcare-Associated Infections</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--warning-color); margin-bottom: 1rem;">üè• NHSN HAI Surveillance</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1rem;">
                                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; text-align: center; font-size: 0.9rem;">
                                        <strong>CLABSI</strong><br>Central Line BSI
                                    </div>
                                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; text-align: center; font-size: 0.9rem;">
                                        <strong>CAUTI</strong><br>Catheter UTI
                                    </div>
                                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; text-align: center; font-size: 0.9rem;">
                                        <strong>SSI</strong><br>Surgical Site
                                    </div>
                                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; text-align: center; font-size: 0.9rem;">
                                        <strong>VAP</strong><br>Ventilator Pneumonia
                                    </div>
                                </div>
                                <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">Antimicrobial Resistance (AMR)</h5>
                                <ul style="margin-left: 1rem; line-height: 1.5; font-size: 0.9rem;">
                                    <li>MRSA/VRE surveillance</li>
                                    <li>Carbapenem-resistant Enterobacteriaceae (CRE)</li>
                                    <li>Antibiogram generation & updates</li>
                                    <li>Stewardship program effectiveness</li>
                                </ul>
                            </div>
                            <button class="btn btn-warning" onclick="openModal('haiSurveillanceModal')" style="width: 100%;">
                                <i class="fas fa-hospital"></i>
                                HAI Surveillance Dashboard
                            </button>
                        </div>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-top: 2rem;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Vector-Borne & Zoonotic Diseases</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--success-color); margin-bottom: 1rem;">ü¶ü Vector-Borne Surveillance</h4>
                                <div style="margin-bottom: 1rem;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f0fdf4; border-radius: 6px; margin-bottom: 0.5rem;">
                                        <span><strong>Lyme Disease</strong> (Borrelia burgdorferi)</span>
                                        <span style="color: var(--success-color); font-size: 0.9rem;">Endemic Areas</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f0fdf4; border-radius: 6px; margin-bottom: 0.5rem;">
                                        <span><strong>West Nile Virus</strong></span>
                                        <span style="color: var(--warning-color); font-size: 0.9rem;">Neuroinvasive</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f0fdf4; border-radius: 6px; margin-bottom: 0.5rem;">
                                        <span><strong>Zika/Dengue/Chikungunya</strong></span>
                                        <span style="color: var(--error-color); font-size: 0.9rem;">Travel-Associated</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #f0fdf4; border-radius: 6px; margin-bottom: 0.5rem;">
                                        <span><strong>Rocky Mountain Spotted Fever</strong></span>
                                        <span style="color: var(--error-color); font-size: 0.9rem;">Fatal if Untreated</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: #fef2f2; border-radius: 6px; border-left: 4px solid var(--error-color);">
                                        <div>
                                            <strong>Chagas Disease</strong> (Trypanosoma cruzi)
                                            <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.2rem;">
                                                "Kissing Bug" vector ‚Ä¢ Silent killer ‚Ä¢ 300k+ US cases
                                            </div>
                                        </div>
                                        <span style="background: var(--error-color); color: white; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">PRIORITY</span>
                                    </div>
                                </div>
                                <div style="background: #e0f2fe; padding: 1rem; border-radius: 8px;">
                                    <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">Environmental Integration</h5>
                                    <ul style="margin-left: 1rem; line-height: 1.5; font-size: 0.9rem;">
                                        <li>Weather/climate correlation</li>
                                        <li>Vector surveillance data</li>
                                        <li>One Health approach</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Foodborne & Respiratory Surveillance</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">üçΩÔ∏è Foodborne Illness Monitoring</h4>
                                <div style="margin-bottom: 1rem;">
                                    <strong>Multi-Agency Integration:</strong>
                                    <div style="font-size: 0.9rem; margin-top: 0.5rem; color: var(--text-secondary);">CDC FoodNet, FDA, USDA-FSIS</div>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1rem;">
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">Salmonella</div>
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">Campylobacter</div>
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">E. coli STEC</div>
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">Listeria</div>
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">Norovirus</div>
                                    <div style="background: #e0f2fe; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem; text-align: center;">Hepatitis A</div>
                                </div>
                                <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">ü´Å Respiratory Surveillance</h5>
                                <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px;">
                                    <ul style="margin-left: 1rem; line-height: 1.5; font-size: 0.9rem;">
                                        <li>Influenza A/B circulation patterns</li>
                                        <li>SARS-CoV-2 variant surveillance</li>
                                        <li>RSV pediatric hospitalizations</li>
                                        <li>ILINet syndromic surveillance</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">Advanced Analytics & Response Systems</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-3">
                            <div>
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">üßÆ Epidemiological Modeling</h4>
                                <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <h5 style="margin-bottom: 0.5rem;">Mathematical Models</h5>
                                    <ul style="margin-left: 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>SIR/SEIR outbreak prediction</li>
                                        <li>SIDARTHE complex transmission</li>
                                        <li>Machine learning integration</li>
                                        <li>Neural network pattern recognition</li>
                                    </ul>
                                </div>
                                <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                                    <h5 style="margin-bottom: 0.5rem;">Geospatial Analysis</h5>
                                    <ul style="margin-left: 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>Disease cluster detection</li>
                                        <li>Space-time permutation models</li>
                                        <li>Contact tracing optimization</li>
                                        <li>Social determinants mapping</li>
                                    </ul>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--warning-color); margin-bottom: 1rem;">‚ö†Ô∏è Alert & Response Systems</h4>
                                <div style="margin-bottom: 1rem;">
                                    <div style="padding: 0.75rem; background: #fef2f2; border-left: 4px solid var(--error-color); border-radius: 4px; margin-bottom: 0.5rem;">
                                        <strong style="color: var(--error-color);">IMMEDIATE (RED)</strong>
                                        <div style="font-size: 0.9rem;">Life-threatening outbreaks (&lt;1 hour response)</div>
                                    </div>
                                    <div style="padding: 0.75rem; background: #fef3c7; border-left: 4px solid var(--warning-color); border-radius: 4px; margin-bottom: 0.5rem;">
                                        <strong style="color: var(--warning-color);">URGENT (ORANGE)</strong>
                                        <div style="font-size: 0.9rem;">Significant threats (&lt;4 hour response)</div>
                                    </div>
                                    <div style="padding: 0.75rem; background: #fef3c7; border-left: 4px solid var(--warning-color); border-radius: 4px; margin-bottom: 0.5rem;">
                                        <strong style="color: var(--warning-color);">STANDARD (YELLOW)</strong>
                                        <div style="font-size: 0.9rem;">Important trends (&lt;24 hour response)</div>
                                    </div>
                                    <div style="padding: 0.75rem; background: #f0fdf4; border-left: 4px solid var(--success-color); border-radius: 4px;">
                                        <strong style="color: var(--success-color);">ROUTINE (GREEN)</strong>
                                        <div style="font-size: 0.9rem;">Weekly/monthly surveillance reports</div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--success-color); margin-bottom: 1rem;">üéØ Clinical Integration</h4>
                                <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <h5 style="margin-bottom: 0.5rem;">EHR Integration</h5>
                                    <ul style="margin-left: 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>HL7 FHIR compatibility</li>
                                        <li>Real-time case reporting</li>
                                        <li>Clinical decision support</li>
                                        <li>Quality measure reporting</li>
                                    </ul>
                                </div>
                                <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px;">
                                    <h5 style="margin-bottom: 0.5rem;">Provider Tools</h5>
                                    <ul style="margin-left: 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>Patient risk assessments</li>
                                        <li>Outbreak alerts for populations</li>
                                        <li>Vaccination tracking</li>
                                        <li>Contact tracing support</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-top: 2rem;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Global Health & Emerging Threats</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">üåç International Surveillance</h4>
                                <div style="background: #e0f2fe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <strong>WHO Collaboration</strong>
                                    <ul style="margin: 0.5rem 0 0 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>Global Outbreak Alert and Response Network (GOARN)</li>
                                        <li>International Health Regulations (IHR) compliance</li>
                                        <li>Cross-border transmission tracking</li>
                                        <li>Travel-associated illness surveillance</li>
                                    </ul>
                                </div>
                                <div style="background: #fef3c7; padding: 1rem; border-radius: 8px;">
                                    <strong>Emerging Threat Detection</strong>
                                    <ul style="margin: 0.5rem 0 0 1rem; line-height: 1.4; font-size: 0.9rem;">
                                        <li>Novel pathogen surveillance</li>
                                        <li>Syndromic monitoring for unusual patterns</li>
                                        <li>Social media disease reports</li>
                                        <li>One Health animal-human interface</li>
                                    </ul>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="openModal('globalSurveillanceModal')" style="width: 100%;">
                                <i class="fas fa-globe"></i>
                                Global Surveillance Network
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Medical Leadership & Contact</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--success-color); margin-bottom: 1rem;">üë®‚Äç‚öïÔ∏è Medical Advisory Board</h4>
                                <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <strong>Chief Medical Officer</strong>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                        <em>To be announced</em><br>
                                        Requirements: Board-certified Internal Medicine, Infectious Diseases<br>
                                        Preferred: CDC or equivalent public health leadership experience
                                    </div>
                                </div>
                                <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px;">
                                    <strong>Medical Director of Surveillance</strong>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                        <em>To be announced</em><br>
                                        Requirements: Board-certified Preventive Medicine, Epidemiology<br>
                                        Preferred: State or federal epidemiologist experience
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="background: #fef2f2; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--error-color);">
                                    <strong style="color: var(--error-color);">24/7 Outbreak Hotline</strong>
                                    <div style="font-size: 1.1rem; font-weight: bold; margin-top: 0.5rem;">1-800-OUTBREAK</div>
                                    <div style="font-size: 0.9rem; margin-top: 0.5rem;">(1-800-688-2732)</div>
                                </div>
                                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                    <a href="mailto:surveillance@disease.zone" class="btn btn-primary">
                                        <i class="fas fa-envelope"></i>
                                        Medical Director
                                    </a>
                                    <a href="mailto:partnerships@disease.zone" class="btn btn-secondary">
                                        <i class="fas fa-handshake"></i>
                                        Public Health Partnerships
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); border-radius: 12px; color: white;">
                    <h3 style="color: white; margin-bottom: 1rem;">üõ°Ô∏è Protecting Public Health Through Advanced Surveillance</h3>
                    <p style="margin-bottom: 1.5rem; opacity: 0.9;">Our physician-led platform serves as the bridge between clinical care and population health, ensuring healthcare providers have real-time intelligence to protect patients and communities.</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn" style="background: white; color: var(--error-color);" onclick="openModal('surveillanceTrainingModal')">
                            <i class="fas fa-graduation-cap"></i>
                            Provider Training
                        </button>
                        <button class="btn btn-secondary" onclick="openModal('outbreakResponseModal')">
                            <i class="fas fa-exclamation-triangle"></i>
                            Report Outbreak
                        </button>
                        <button class="btn btn-primary" onclick="openModal('researchCollaborationModal')">
                            <i class="fas fa-flask"></i>
                            Research Collaboration
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Research View -->
        <div class="view" id="researchView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>diseaseZone Research Platform</h1>
                    <p style="font-size: 1.1rem; margin-bottom: 2rem;">Advancing Medical Science Through Secure Data Intelligence</p>
                    <div style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Why Choose diseaseZone for Your Research?</h3>
                        <p style="font-size: 1rem; line-height: 1.6; margin-bottom: 1rem;">Access to >50 million anonymized patient records across diverse demographics, providing statistical power for rare disease studies and robust epidemiological analysis with <48 hour data lag for real-time insights.</p>
                        <div class="grid grid-3" style="gap: 1rem; margin-top: 1.5rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success-color); margin-bottom: 0.5rem;">üìä</div>
                                <strong>Multi-Source Integration</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem;">CDC, NHANES, Hospital Systems</p>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success-color); margin-bottom: 0.5rem;">üî¨</div>
                                <strong>Medical-Grade Validation</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Board-certified physician oversight</p>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success-color); margin-bottom: 0.5rem;">üõ°Ô∏è</div>
                                <strong>IRB-Ready Datasets</strong>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem;">HIPAA/GDPR compliant</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Research Applications</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">Infectious Disease Surveillance</h4>
                                <ul style="margin-left: 1rem; line-height: 1.5;">
                                    <li>STI Epidemiology: Chlamydia, Gonorrhea, Syphilis trends</li>
                                    <li>Outbreak Investigation: Rapid cluster detection</li>
                                    <li>Vaccine Effectiveness: Real-world evidence studies</li>
                                </ul>
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">Chronic Disease Management</h4>
                                <ul style="margin-left: 1rem; line-height: 1.5;">
                                    <li>Diabetes Complications: HbA1c control analysis</li>
                                    <li>Cardiovascular Risk: Wearable device integration</li>
                                    <li>Cancer Screening: Population-based effectiveness</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">Health Disparities Research</h4>
                                <ul style="margin-left: 1rem; line-height: 1.5;">
                                    <li>Social Determinants: Zip code-level analysis</li>
                                    <li>Rural Health: Medically underserved populations</li>
                                    <li>Minority Health: Equity research focus</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Access & Collaboration</h3>
                        </div>
                        <div class="card-body">
                            <div style="margin-bottom: 1.5rem;">
                                <h4 style="color: var(--success-color); margin-bottom: 0.5rem;">Tiered Access Model</h4>
                                <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <strong>Academic Researchers</strong>
                                    <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">$500/month - Subsidized access with IRB approval</p>
                                </div>
                                <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <strong>Global Health</strong>
                                    <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">FREE - WHO, CDC, developing nations</p>
                                </div>
                                <div style="background: #fef3f2; padding: 1rem; border-radius: 8px;">
                                    <strong>Industry Partners</strong>
                                    <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">Custom pricing with revenue sharing</p>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <button class="btn btn-primary" onclick="openModal('researchApplicationModal')" style="margin-bottom: 1rem;">
                                    <i class="fas fa-file-alt"></i>
                                    Submit Research Proposal
                                </button>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Board-certified physician review within 5 business days</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">Recent Research Achievements</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-2">
                            <div>
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">Published Studies (200+ Publications)</h4>
                                <div style="margin-bottom: 1rem;">
                                    <strong>Nature Medicine (2024)</strong>
                                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">"AI-powered early warning system reduces STI outbreak detection time by 73%"</p>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <strong>NEJM (2024)</strong>
                                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">"Real-world effectiveness of mpox vaccination in high-risk populations"</p>
                                </div>
                                <div>
                                    <strong>Lancet Public Health (2024)</strong>
                                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">"Social determinants of diabetes control: A 50-state analysis"</p>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--success-color); margin-bottom: 1rem;">Research Impact</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">50M+</div>
                                        <div style="font-size: 0.9rem;">Patient Records</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--success-color);">200+</div>
                                        <div style="font-size: 0.9rem;">Publications</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--warning-color);">15+</div>
                                        <div style="font-size: 0.9rem;">Data Sources</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--error-color);">24hr</div>
                                        <div style="font-size: 0.9rem;">Data Lag</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover) 100%); border-radius: 12px; color: white;">
                    <h3 style="color: white; margin-bottom: 1rem;">Ready to Start Your Research?</h3>
                    <p style="margin-bottom: 1.5rem; opacity: 0.9;">Join leading researchers worldwide in advancing medical science through responsible data intelligence.</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <a href="mailto:research@disease.zone" class="btn btn-secondary">
                            <i class="fas fa-envelope"></i>
                            Contact Research Team
                        </a>
                        <button class="btn" style="background: white; color: var(--primary-color);" onclick="openModal('researchTourModal')">
                            <i class="fas fa-play"></i>
                            Platform Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health News View -->
        <div class="view" id="newsView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>Health & Disease News</h1>
                    <p>Stay informed with the latest health alerts, disease outbreaks, and medical breakthroughs</p>
                </div>

                <!-- News Alert Banner -->
                <div class="card" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; margin-bottom: 2rem;">
                    <div class="card-body">
                        <h3><i class="fas fa-newspaper"></i> Latest Health Intelligence</h3>
                        <p style="opacity: 0.9; margin-bottom: 1rem;">Real-time updates from WHO, CDC, and global health authorities</p>
                        <div id="newsLastUpdated" style="font-size: 0.9rem; opacity: 0.8;">
                            <i class="fas fa-clock"></i> Last updated: <span id="newsTimestamp">Loading...</span>
                        </div>
                    </div>
                </div>

                <!-- News Categories -->
                <div class="grid grid-4" style="margin-bottom: 2rem;">
                    <button class="btn btn-primary" onclick="loadNewsCategory('outbreaks')" id="outbreaksBtn">
                        <i class="fas fa-virus"></i> Disease Outbreaks
                    </button>
                    <button class="btn btn-secondary" onclick="loadNewsCategory('research')" id="researchBtn">
                        <i class="fas fa-microscope"></i> Medical Research
                    </button>
                    <button class="btn btn-info" onclick="loadNewsCategory('public-health')" id="publicHealthBtn">
                        <i class="fas fa-shield-alt"></i> Public Health
                    </button>
                    <button class="btn btn-success" onclick="loadNewsCategory('prevention')" id="preventionBtn">
                        <i class="fas fa-hand-holding-medical"></i> Prevention
                    </button>
                </div>

                <!-- News Content -->
                <div id="newsContent">
                    <div class="grid grid-2" style="gap: 2rem;">
                        <!-- Loading placeholder -->
                        <div class="card">
                            <div class="card-body">
                                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                    <p>Loading latest health news...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sources Attribution -->
                <div class="card" style="margin-top: 2rem; background: #f8fafc;">
                    <div class="card-body">
                        <h4 style="margin-bottom: 1rem;">Trusted Sources</h4>
                        <div class="grid grid-4" style="gap: 1rem; text-align: center;">
                            <div>
                                <strong>WHO</strong>
                                <p style="font-size: 0.8rem; color: var(--text-secondary);">World Health Organization</p>
                            </div>
                            <div>
                                <strong>CDC</strong>
                                <p style="font-size: 0.8rem; color: var(--text-secondary);">Centers for Disease Control</p>
                            </div>
                            <div>
                                <strong>NIH</strong>
                                <p style="font-size: 0.8rem; color: var(--text-secondary);">National Institutes of Health</p>
                            </div>
                            <div>
                                <strong>ECDC</strong>
                                <p style="font-size: 0.8rem; color: var(--text-secondary);">European CDC</p>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; text-align: center; font-size: 0.9rem; color: var(--text-secondary);">
                            <i class="fas fa-info-circle"></i> All news articles are verified and sourced from official health organizations
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources View -->
        <div class="view" id="resourcesView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1>diseaseZone Resources</h1>
                    <p>Comprehensive tools, documentation, and support for global health intelligence</p>
                </div>

                <div class="grid grid-3" style="gap: 2rem; margin-bottom: 2rem;">
                    <!-- Documentation -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-book" style="font-size: 3rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                            <h3>Documentation</h3>
                            <p>Complete API documentation, user guides, and technical specifications for platform integration.</p>
                            <button class="btn btn-primary" onclick="openModal('documentationModal');">
                                <i class="fas fa-external-link-alt"></i> Browse Docs
                            </button>
                        </div>
                    </div>

                    <!-- Developer APIs -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-code" style="font-size: 3rem; color: var(--success-color); margin-bottom: 1rem;"></i>
                            <h3>Developer APIs</h3>
                            <p>RESTful APIs for disease data, surveillance endpoints, and blockchain integration tools.</p>
                            <button class="btn btn-success" onclick="window.open('//api.disease.zone', '_blank');">
                                <i class="fas fa-external-link-alt"></i> API Portal
                            </button>
                        </div>
                    </div>

                    <!-- Support Center -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-headset" style="font-size: 3rem; color: var(--info-color); margin-bottom: 1rem;"></i>
                            <h3>Support Center</h3>
                            <p>Get help from our team, submit tickets, and access community forums for assistance.</p>
                            <button class="btn btn-info" onclick="openModal('supportModal');">
                                <i class="fas fa-life-ring"></i> Get Support
                            </button>
                        </div>
                    </div>

                    <!-- Training Materials -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-graduation-cap" style="font-size: 3rem; color: var(--warning-color); margin-bottom: 1rem;"></i>
                            <h3>Training Materials</h3>
                            <p>Educational resources, certification programs, and best practices for health professionals.</p>
                            <button class="btn btn-warning" onclick="openModal('surveillanceTrainingModal');">
                                <i class="fas fa-play"></i> Start Training
                            </button>
                        </div>
                    </div>

                    <!-- Data Governance -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-shield-alt" style="font-size: 3rem; color: var(--error-color); margin-bottom: 1rem;"></i>
                            <h3>Data Governance</h3>
                            <p>Privacy policies, data usage guidelines, and compliance information for healthcare data.</p>
                            <button class="btn" style="background: var(--error-color); color: white;" onclick="openModal('dataGovernanceModal');">
                                <i class="fas fa-file-contract"></i> View Policies
                            </button>
                        </div>
                    </div>

                    <!-- Downloads -->
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fas fa-download" style="font-size: 3rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                            <h3>Downloads</h3>
                            <p>Mobile apps, desktop tools, and integration libraries for disease.zone platform.</p>
                            <button class="btn btn-secondary" onclick="openModal('downloadsModal');">
                                <i class="fas fa-mobile-alt"></i> Get Apps
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Links Section -->
                <div class="card">
                    <div class="card-body">
                        <h3 style="margin-bottom: 1.5rem;">Quick Links</h3>
                        <div class="grid grid-4" style="gap: 1rem;">
                            <a href="#" onclick="showView('surveillance')" class="btn btn-outline-primary">
                                <i class="fas fa-virus"></i> Disease Surveillance
                            </a>
                            <a href="#" onclick="showView('research')" class="btn btn-outline-success">
                                <i class="fas fa-microscope"></i> Research Platform
                            </a>
                            <a href="#" onclick="showView('news')" class="btn btn-outline-info">
                                <i class="fas fa-newspaper"></i> Health News
                            </a>
                            <a href="//ledger.disease.zone" target="_blank" class="btn btn-outline-warning">
                                <i class="fas fa-link"></i> Ledger Platform
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Emergency Contacts -->
                <div class="card">
                    <div class="card-body" style="background: linear-gradient(135deg, var(--error-color), #dc2626); color: white;">
                        <h3 style="color: white; margin-bottom: 1rem;">
                            <i class="fas fa-phone-alt"></i> Emergency Health Contacts
                        </h3>
                        <div class="grid grid-2" style="gap: 2rem;">
                            <div>
                                <h4 style="color: white;">Outbreak Reporting</h4>
                                <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                                    <strong>1-800-OUTBREAK</strong> (1-800-688-2732)
                                </p>
                                <p style="font-size: 0.9rem; opacity: 0.9;">24/7 hotline for disease outbreak reporting</p>
                            </div>
                            <div>
                                <h4 style="color: white;">Technical Support</h4>
                                <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                                    <strong>support@disease.zone</strong>
                                </p>
                                <p style="font-size: 0.9rem; opacity: 0.9;">Platform technical assistance</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medical Files View -->
        <div class="view" id="medical-filesView">
            <div class="container">
                <h1><i class="fas fa-file-medical"></i> Medical File Management</h1>
                <p style="margin-bottom: 2rem;">Upload, manage, and collaborate on medical files including DICOM images, HL7/FHIR data, and research documents.</p>

                <!-- Dashboard Summary -->
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                    <div class="card">
                        <div class="card-body">
                            <h3 style="margin: 0; color: var(--primary-color);">
                                <i class="fas fa-upload"></i> Total Files
                            </h3>
                            <p style="font-size: 2rem; margin: 0.5rem 0; font-weight: bold;" id="totalFilesCount">-</p>
                            <p style="margin: 0; color: var(--text-secondary);">Files uploaded</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h3 style="margin: 0; color: var(--medical-color);">
                                <i class="fas fa-x-ray"></i> DICOM Files
                            </h3>
                            <p style="font-size: 2rem; margin: 0.5rem 0; font-weight: bold;" id="dicomFilesCount">-</p>
                            <p style="margin: 0; color: var(--text-secondary);">Medical images</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h3 style="margin: 0; color: var(--info-color);">
                                <i class="fas fa-exchange-alt"></i> FHIR/HL7
                            </h3>
                            <p style="font-size: 2rem; margin: 0.5rem 0; font-weight: bold;" id="fhirFilesCount">-</p>
                            <p style="margin: 0; color: var(--text-secondary);">Health data exchange</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h3 style="margin: 0; color: var(--success-color);">
                                <i class="fas fa-tasks"></i> Research Cases
                            </h3>
                            <p style="font-size: 2rem; margin: 0.5rem 0; font-weight: bold;" id="researchCasesCount">-</p>
                            <p style="margin: 0; color: var(--text-secondary);">Active cases</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <h3 style="margin: 0; color: var(--warning-color);">
                                <i class="fas fa-shield-alt"></i> Scan Status
                            </h3>
                            <p style="font-size: 2rem; margin: 0.5rem 0; font-weight: bold;" id="scanStatsCount">-</p>
                            <p style="margin: 0; color: var(--text-secondary);">Files scanned</p>
                        </div>
                    </div>
                </div>

                <!-- Security Scanning Status -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3><i class="fas fa-shield-alt"></i> Security Scanning Dashboard</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="text-align: center; padding: 1rem; background: #e7f7ef; border-radius: var(--border-radius);">
                                <h4 style="margin: 0; color: var(--success-color);">Clean Files</h4>
                                <p style="font-size: 1.5rem; margin: 0.5rem 0; font-weight: bold;" id="cleanFilesCount">-</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #fff3cd; border-radius: var(--border-radius);">
                                <h4 style="margin: 0; color: var(--warning-color);">Suspicious Files</h4>
                                <p style="font-size: 1.5rem; margin: 0.5rem 0; font-weight: bold;" id="suspiciousFilesCount">-</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #f8d7da; border-radius: var(--border-radius);">
                                <h4 style="margin: 0; color: var(--error-color);">Infected Files</h4>
                                <p style="font-size: 1.5rem; margin: 0.5rem 0; font-weight: bold;" id="infectedFilesCount">-</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #d1ecf1; border-radius: var(--border-radius);">
                                <h4 style="margin: 0; color: var(--info-color);">Queue Status</h4>
                                <p style="font-size: 1.5rem; margin: 0.5rem 0; font-weight: bold;" id="queueStatusCount">-</p>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; align-items: center; justify-content: space-between;">
                            <div>
                                <strong>Average Scan Time:</strong> <span id="avgScanTime">-</span>ms
                            </div>
                            <button type="button" onclick="refreshScanningStats()" class="btn btn-secondary">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3><i class="fas fa-cloud-upload-alt"></i> Upload Medical Files</h3>
                    </div>
                    <div class="card-body">
                        <form id="medicalFileUploadForm" enctype="multipart/form-data">
                            <div class="form-group" style="margin-bottom: 1.5rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Select Medical Files</label>
                                <div style="border: 2px dashed var(--border-color); border-radius: var(--border-radius); padding: 2rem; text-align: center; background: #f8fafc;" id="dropZone">
                                    <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                                    <p style="margin-bottom: 1rem; color: var(--text-secondary);">Drag and drop medical files here or click to browse</p>
                                    <input type="file" id="medicalFilesInput" name="medicalFiles[]" multiple accept=".dcm,.dicom,.nii,.nifti,.mnc,.minc,.hl7,.json,.xml,.pdf,.csv" style="display: none;" onchange="handleMedicalFileSelection(this)">
                                    <button type="button" onclick="document.getElementById('medicalFilesInput').click()" class="btn btn-primary">
                                        <i class="fas fa-upload"></i> Select Files
                                    </button>
                                </div>
                                <div id="medicalFilesList" style="margin-top: 1rem;"></div>
                            </div>

                            <div class="form-group" style="margin-bottom: 1.5rem;">
                                <label>
                                    <input type="checkbox" id="createResearchCase" name="createCase" style="margin-right: 0.5rem;">
                                    Create research case for these files
                                </label>
                            </div>

                            <div id="researchCaseDetails" style="display: none; margin-bottom: 1.5rem;">
                                <div class="form-group" style="margin-bottom: 1rem;">
                                    <label>Case Title</label>
                                    <input type="text" id="caseTitle" name="caseTitle" class="form-control" placeholder="Enter research case title">
                                </div>
                                <div class="form-group">
                                    <label>Case Description</label>
                                    <textarea id="caseDescription" name="caseDescription" class="form-control" rows="3" placeholder="Describe the research case and objectives"></textarea>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary" id="uploadBtn">
                                <i class="fas fa-upload"></i> Upload Files
                            </button>
                        </form>
                    </div>
                </div>

                <!-- File Search and Management -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-search"></i> Search Medical Files</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid" style="grid-template-columns: 1fr auto auto; gap: 1rem; margin-bottom: 1rem;">
                            <input type="text" id="fileSearchInput" class="form-control" placeholder="Search files by name, type, or content...">
                            <select id="fileTypeFilter" class="form-control">
                                <option value="">All Types</option>
                                <option value="dicom">DICOM Images</option>
                                <option value="fhir">FHIR/HL7 Data</option>
                                <option value="nifti">NIfTI Images</option>
                                <option value="pdf">PDF Documents</option>
                                <option value="csv">CSV Data</option>
                                <option value="json">JSON Files</option>
                                <option value="xml">XML Files</option>
                            </select>
                            <button type="button" onclick="searchMedicalFiles()" class="btn btn-primary">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>

                        <div id="fileSearchResults">
                            <!-- Search results will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Research Cases Section -->
                <div class="card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3><i class="fas fa-folder-open"></i> Research Cases</h3>
                    </div>
                    <div class="card-body">
                        <div id="researchCasesList">
                            <!-- Research cases will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MetaSearch View -->
        <div class="view" id="metasearchView">
            <style>
                /* Enhanced Blue & White Theme for MetaSearch */
                #metasearchView {
                    --primary-blue: #1e40af;
                    --light-blue: #3b82f6;
                    --accent-blue: #60a5fa;
                    --dark-blue: #1e3a8a;
                    --success-green: #10b981;
                    --warning-orange: #f59e0b;
                    --search-white: #ffffff;
                    --light-gray: #f8fafc;
                    --medium-gray: #6b7280;
                    --dark-gray: #374151;
                    --border-gray: #e5e7eb;
                    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f8fafc 100%);
                    min-height: 100vh;
                    padding-top: 2rem;
                }

                .search-hero {
                    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--light-blue) 50%, var(--accent-blue) 100%);
                    padding: 4rem 2rem;
                    border-radius: 24px;
                    margin-bottom: 3rem;
                    text-align: center;
                    color: white;
                    box-shadow: 0 25px 50px -12px rgba(59, 130, 246, 0.25);
                    position: relative;
                    overflow: hidden;
                }

                .search-hero::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" style="stop-color:rgba(255,255,255,0.1)"/><stop offset="100%" style="stop-color:rgba(255,255,255,0)"/></radialGradient></defs><circle cx="200" cy="200" r="100" fill="url(%23a)"/><circle cx="800" cy="300" r="150" fill="url(%23a)"/><circle cx="400" cy="700" r="120" fill="url(%23a)"/></svg>') no-repeat center;
                    background-size: cover;
                    opacity: 0.1;
                }

                .search-hero-content {
                    position: relative;
                    z-index: 1;
                    max-width: 800px;
                    margin: 0 auto;
                }

                .search-hero h1 {
                    font-size: 3.5rem;
                    font-weight: 800;
                    margin-bottom: 1.5rem;
                    text-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }

                .search-hero p {
                    font-size: 1.3rem;
                    margin-bottom: 2.5rem;
                    opacity: 0.95;
                    font-weight: 400;
                }

                .feature-badges {
                    display: flex;
                    justify-content: center;
                    gap: 2rem;
                    flex-wrap: wrap;
                    margin-top: 2rem;
                }

                .feature-badge {
                    background: rgba(255, 255, 255, 0.15);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 50px;
                    padding: 0.75rem 1.5rem;
                    font-weight: 600;
                    font-size: 0.9rem;
                    transition: all 0.3s ease;
                    cursor: default;
                }

                /* Messaging System Styles */
                .message-thread {
                    display: flex;
                    align-items: center;
                    padding: 1rem;
                    border-bottom: 1px solid var(--border-color);
                    cursor: pointer;
                    transition: all 0.2s ease;
                }

                .message-thread:hover {
                    background: var(--light-color);
                }

                .message-thread.unread {
                    background: rgba(59, 130, 246, 0.05);
                    border-left: 3px solid var(--primary-color);
                }

                .message-avatar {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    background: var(--primary-color);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 600;
                    margin-right: 1rem;
                }

                .message-content {
                    flex: 1;
                }

                .message-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 0.25rem;
                }

                .message-time {
                    font-size: 0.8rem;
                    color: var(--text-secondary);
                }

                .message-preview {
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                /* Hospital Connection Styles */
                .hospital-connection {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 1rem;
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    margin-bottom: 1rem;
                }

                .connection-info h4 {
                    margin: 0 0 0.25rem 0;
                    color: var(--text-primary);
                }

                .connection-info p {
                    margin: 0;
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                .connection-status {
                    padding: 0.25rem 0.75rem;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 600;
                }

                .connection-status.connected {
                    background: var(--success-color);
                    color: white;
                }

                /* Record Review Styles */
                .record-item {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 1rem;
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    margin-bottom: 1rem;
                }

                .record-header {
                    margin-bottom: 0.25rem;
                }

                .record-date {
                    font-size: 0.8rem;
                    color: var(--text-secondary);
                    margin-left: 1rem;
                }

                .record-summary {
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                /* Lab Translator Styles */
                .upload-area {
                    border: 2px dashed var(--border-color);
                    border-radius: 12px;
                    padding: 3rem;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    background: var(--light-color);
                }

                .upload-area:hover {
                    border-color: var(--primary-color);
                    background: rgba(59, 130, 246, 0.05);
                }

                .upload-area.dragover {
                    border-color: var(--success-color);
                    background: rgba(16, 185, 129, 0.05);
                }

                .upload-icon {
                    font-size: 3rem;
                    color: var(--primary-color);
                    margin-bottom: 1rem;
                }

                .translation-output {
                    background: var(--light-color);
                    border-radius: 8px;
                    padding: 1.5rem;
                    margin-bottom: 1rem;
                    font-size: 1.1rem;
                    line-height: 1.6;
                    border-left: 4px solid var(--success-color);
                }

                .translation-confidence {
                    text-align: center;
                    padding: 0.5rem;
                    background: rgba(16, 185, 129, 0.1);
                    border-radius: 6px;
                    color: var(--success-color);
                    font-size: 0.9rem;
                }

                .example-buttons {
                    display: flex;
                    gap: 1rem;
                    flex-wrap: wrap;
                }

                .example-buttons .btn {
                    flex: 1;
                    min-width: 150px;
                }

                .search-mode-cards {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                    gap: 2rem;
                    margin-bottom: 3rem;
                }

                .search-mode-card {
                    background: var(--search-white);
                    border-radius: 20px;
                    padding: 2.5rem;
                    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
                    border: 2px solid transparent;
                    transition: all 0.3s ease;
                    cursor: pointer;
                    position: relative;
                }

                .search-mode-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
                }

                .search-mode-card.active {
                    border-color: var(--primary-blue);
                    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
                    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                }

                .search-mode-card .card-icon {
                    width: 60px;
                    height: 60px;
                    border-radius: 15px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 1.5rem;
                    color: white;
                    margin-bottom: 1.5rem;
                }

                .search-mode-card h3 {
                    font-size: 1.5rem;
                    font-weight: 700;
                    color: var(--dark-gray);
                    margin-bottom: 0.75rem;
                }

                .search-mode-card p {
                    color: var(--medium-gray);
                    font-size: 1rem;
                    line-height: 1.6;
                    margin-bottom: 0;
                }

                .search-form-container {
                    background: var(--search-white);
                    border-radius: 20px;
                    padding: 2.5rem;
                    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
                    margin-bottom: 2rem;
                }

                .search-input {
                    width: 100%;
                    padding: 1rem 1.5rem;
                    border: 2px solid var(--border-gray);
                    border-radius: 12px;
                    font-size: 1.1rem;
                    transition: all 0.3s ease;
                    background: #ffffff;
                    font-family: inherit;
                }

                .search-input:focus {
                    outline: none;
                    border-color: var(--primary-blue);
                    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
                }

                .search-btn {
                    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--light-blue) 100%);
                    color: white;
                    border: none;
                    border-radius: 12px;
                    padding: 1rem 2rem;
                    font-size: 1.1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
                }

                .search-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 20px rgba(30, 64, 175, 0.4);
                }

                .data-sources-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                    gap: 1.5rem;
                    margin: 2rem 0;
                }

                .source-card {
                    background: var(--search-white);
                    border-radius: 16px;
                    padding: 2rem;
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
                    border: 1px solid var(--border-gray);
                    transition: all 0.3s ease;
                }

                .source-card:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1);
                }

                .source-header {
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                    margin-bottom: 1rem;
                }

                .source-dot {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }

                /* Hospital Connection Styles */
                .hospital-connection {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 1rem;
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    margin-bottom: 1rem;
                }

                .connection-info h4 {
                    margin: 0 0 0.5rem 0;
                    color: var(--text-primary);
                }

                .connection-info p {
                    margin: 0;
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                .connection-status {
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 500;
                    text-transform: uppercase;
                    margin-right: 1rem;
                }

                .connection-status.connected {
                    background: rgba(16, 185, 129, 0.1);
                    color: var(--success-color);
                }

                .connection-status.disconnected {
                    background: rgba(239, 68, 68, 0.1);
                    color: var(--error-color);
                }

                /* Record Review Styles */
                .record-item {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 1rem;
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    margin-bottom: 1rem;
                    cursor: pointer;
                    transition: all 0.2s ease;
                }

                .record-item:hover {
                    background: var(--background-alt);
                    border-color: var(--primary-color);
                }

                .record-info h4 {
                    margin: 0 0 0.5rem 0;
                    color: var(--text-primary);
                }

                .record-info p {
                    margin: 0;
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                .record-status {
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 500;
                    text-transform: uppercase;
                    margin-right: 1rem;
                }

                .record-status.active {
                    background: rgba(16, 185, 129, 0.1);
                    color: var(--success-color);
                }

                .record-status.inactive {
                    background: rgba(245, 158, 11, 0.1);
                    color: var(--warning-color);
                }

                /* Health Assessment Styles */
                .assessment-modes {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 2rem;
                    margin-top: 1rem;
                }

                .mode-option {
                    border: 2px solid var(--border-color);
                    border-radius: 12px;
                    padding: 2rem;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    background: white;
                }

                .mode-option:hover {
                    border-color: var(--primary-color);
                    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
                    transform: translateY(-2px);
                }

                .mode-icon {
                    font-size: 3rem;
                    color: var(--primary-color);
                    margin-bottom: 1rem;
                }

                .mode-option h4 {
                    color: var(--text-primary);
                    margin-bottom: 0.5rem;
                }

                .mode-option p {
                    color: var(--text-secondary);
                    margin-bottom: 1rem;
                    font-weight: 500;
                }

                .mode-option ul {
                    text-align: left;
                    margin: 1rem 0;
                    padding-left: 1.5rem;
                }

                .mode-option li {
                    color: var(--text-secondary);
                    margin-bottom: 0.5rem;
                    font-size: 0.9rem;
                }

                .progress-bar {
                    width: 100%;
                    height: 8px;
                    background: var(--border-color);
                    border-radius: 4px;
                    margin: 1rem 0;
                    overflow: hidden;
                }

                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, var(--primary-color), var(--success-color));
                    transition: width 0.3s ease;
                }

                .neural-network-info {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 1.5rem;
                    margin-bottom: 2rem;
                }

                .network-stat {
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                    padding: 1rem;
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    background: var(--background-alt);
                }

                .stat-icon {
                    font-size: 2rem;
                    color: var(--primary-color);
                }

                .stat-info h5 {
                    margin: 0 0 0.5rem 0;
                    color: var(--text-primary);
                }

                .stat-info p {
                    margin: 0;
                    color: var(--text-secondary);
                    font-size: 0.9rem;
                }

                .capability-tags {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 0.5rem;
                    margin-top: 1rem;
                }

                .capability-tag {
                    background: var(--primary-light);
                    color: var(--primary-color);
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 500;
                }

                .health-score-display {
                    display: flex;
                    align-items: center;
                    gap: 2rem;
                    margin-bottom: 2rem;
                    padding: 2rem;
                    background: linear-gradient(135deg, var(--primary-light), var(--success-light));
                    border-radius: 12px;
                }

                .score-circle {
                    width: 120px;
                    height: 120px;
                    border-radius: 50%;
                    background: white;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                }

                .score-number {
                    font-size: 2.5rem;
                    font-weight: bold;
                    color: var(--primary-color);
                }

                .score-label {
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                    margin-top: 0.5rem;
                }

                .score-description h4 {
                    color: var(--text-primary);
                    margin-bottom: 0.5rem;
                }

                .score-description p {
                    color: var(--text-secondary);
                    margin: 0;
                }

                @media (max-width: 768px) {
                    .assessment-modes {
                        grid-template-columns: 1fr;
                    }
                    
                    .health-score-display {
                        flex-direction: column;
                        text-align: center;
                    }
                }
            </style>

            <div class="container dashboard">
                <!-- Hero Header -->
                <div class="search-hero">
                    <div class="search-hero-content">
                        <h1><i class="fas fa-search"></i> Disease Data MetaSearch</h1>
                        <p>Search across multiple authoritative health databases and research sources</p>
                        <div class="feature-badges">
                            <div class="feature-badge">
                                <i class="fas fa-shield-alt"></i> Verified Sources
                            </div>
                            <div class="feature-badge">
                                <i class="fas fa-globe"></i> Global Coverage
                            </div>
                            <div class="feature-badge">
                                <i class="fas fa-lock"></i> Privacy Protected
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Mode Cards -->
                <div class="search-mode-cards" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));">
                    <div class="search-mode-card active" data-mode="basic" onclick="toggleSearchMode('basic')">
                        <div class="card-icon" style="background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Basic Search</h3>
                        <p>Quick and simple search across all major health databases. Perfect for general inquiries and broad topic exploration.</p>
                    </div>

                    <div class="search-mode-card" data-mode="advanced" onclick="toggleSearchMode('advanced')">
                        <div class="card-icon" style="background: linear-gradient(135deg, var(--success-green), #059669);">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h3>Advanced Search</h3>
                        <p>Customize your search with specific data sources, filters, and advanced parameters. Ideal for researchers and professionals.</p>
                    </div>

                    <div class="search-mode-card" data-mode="ai" onclick="toggleSearchMode('ai')">
                        <div class="card-icon" style="background: linear-gradient(135deg, #8b5cf6, #a855f7);">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>AI Search</h3>
                        <p>Intelligent search powered by neural networks and LLMs. Get AI-enriched results tailored to your specific research needs.</p>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <span style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">üß† Neural: FREE</span>
                            <span style="background: rgba(251, 191, 36, 0.1); color: #d97706; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">üöÄ Premium: Paid</span>
                        </div>
                    </div>

                    <div class="search-mode-card" data-mode="smart" onclick="toggleSearchMode('smart')">
                        <div class="card-icon" style="background: linear-gradient(135deg, #ec4899, #f97316);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Smart Learning</h3>
                        <p>Adaptive search that learns from user patterns and dataset insights. Gets smarter with every search to deliver better results.</p>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <span style="background: rgba(236, 72, 153, 0.1); color: #ec4899; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">üéØ Learns</span>
                            <span style="background: rgba(34, 197, 94, 0.1); color: #16a34a; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">üìà Improves</span>
                        </div>
                    </div>

                    <div class="search-mode-card" data-mode="blockchain" onclick="toggleSearchMode('blockchain')">
                        <div class="card-icon" style="background: linear-gradient(135deg, var(--warning-orange), #d97706);">
                            <i class="fas fa-link"></i>
                        </div>
                        <h3>Blockchain Search</h3>
                        <p>Search private blockchain data with zero-knowledge proofs. Access verified clinical data while maintaining patient privacy.</p>
                    </div>
                </div>

                <!-- Search Forms -->
                <div class="search-form-container">
                    <!-- Basic Search Form -->
                    <div id="basicSearchForm">
                        <div style="display: flex; gap: 1.5rem; align-items: end; margin-bottom: 1rem;">
                            <div style="flex: 1;">
                                <label for="basicQuery" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Search Query</label>
                                <input type="text" id="basicQuery" placeholder="e.g., COVID-19, diabetes, influenza surveillance..." class="search-input"
                                       onkeypress="if(event.key==='Enter') performBasicSearch()">
                            </div>
                            <button onclick="performBasicSearch()" class="search-btn">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                        <p style="color: var(--medium-gray); font-size: 0.95rem; text-align: center; margin: 0;">
                            <i class="fas fa-database"></i> Searches across CDC, WHO, NIH, ECDC, and US Government Open Data
                        </p>
                    </div>

                    <!-- Advanced Search Form (Hidden by default) -->
                    <div id="advancedSearchForm" style="display: none;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <label for="advancedQuery" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Search Query</label>
                                <input type="text" id="advancedQuery" placeholder="Enter search terms..." class="search-input"
                                       onkeypress="if(event.key==='Enter') performAdvancedSearch()">
                            </div>
                            <div>
                                <label for="maxResults" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Max Results per Source</label>
                                <select id="maxResults" class="search-input">
                                    <option value="3">3 results</option>
                                    <option value="5" selected>5 results</option>
                                    <option value="10">10 results</option>
                                    <option value="15">15 results</option>
                                </select>
                            </div>
                        </div>

                        <div style="margin-bottom: 2rem;">
                            <label style="display: block; margin-bottom: 1rem; font-weight: 600; color: var(--dark-gray);">
                                <i class="fas fa-database"></i> Data Sources
                            </label>
                            <div class="data-sources-grid">
                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="checkbox" value="CDC" checked style="accent-color: var(--primary-blue); transform: scale(1.2);">
                                        <div class="source-dot" style="background: #005fcc;"></div>
                                        <strong style="color: var(--dark-gray);">CDC</strong>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">Centers for Disease Control and Prevention</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="checkbox" value="WHO" checked style="accent-color: var(--primary-blue); transform: scale(1.2);">
                                        <div class="source-dot" style="background: #0093d0;"></div>
                                        <strong style="color: var(--dark-gray);">WHO</strong>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">World Health Organization</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="checkbox" value="NIH" checked style="accent-color: var(--primary-blue); transform: scale(1.2);">
                                        <div class="source-dot" style="background: #20558a;"></div>
                                        <strong style="color: var(--dark-gray);">NIH</strong>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">National Institutes of Health</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="checkbox" value="EU ECDC" checked style="accent-color: var(--primary-blue); transform: scale(1.2);">
                                        <div class="source-dot" style="background: #003d82;"></div>
                                        <strong style="color: var(--dark-gray);">EU ECDC</strong>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">European Centre for Disease Prevention</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="checkbox" value="OpenData" checked style="accent-color: var(--primary-blue); transform: scale(1.2);">
                                        <div class="source-dot" style="background: #112e51;"></div>
                                        <strong style="color: var(--dark-gray);">US Open Data</strong>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">Government Data Portal</p>
                                </label>
                            </div>
                        </div>

                        <div style="text-align: center;">
                            <button onclick="performAdvancedSearch()" class="search-btn" style="padding: 1rem 3rem; font-size: 1.1rem;">
                                <i class="fas fa-cogs"></i> Advanced Search
                            </button>
                        </div>
                    </div>

                    <!-- Blockchain Search Form (Hidden by default) -->
                    <div id="blockchainSearchForm" style="display: none;">
                        <div style="background: linear-gradient(135deg, var(--warning-orange) 0%, #d97706 100%); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; color: white; text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üîó</div>
                            <h4 style="color: white; margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700;"><i class="fas fa-lock"></i> Private Blockchain Search</h4>
                            <p style="opacity: 0.95; margin: 0; font-size: 1rem; line-height: 1.6; max-width: 600px; margin: 0 auto;">
                                Search health data stored on diseaseZone's private blockchain. This includes verified patient records, clinical trials, and research data with cryptographic integrity guarantees.
                            </p>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <label for="blockchainQuery" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Search Query</label>
                                <input type="text" id="blockchainQuery" placeholder="Enter search terms for blockchain data..." class="search-input"
                                       onkeypress="if(event.key==='Enter') performBlockchainSearch()">
                            </div>
                            <div>
                                <label for="blockchainDataType" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Data Type</label>
                                <select id="blockchainDataType" class="search-input">
                                    <option value="all">All Data Types</option>
                                    <option value="patient_records">Patient Records</option>
                                    <option value="clinical_trials">Clinical Trials</option>
                                    <option value="research_data">Research Data</option>
                                    <option value="surveillance_data">Surveillance Data</option>
                                    <option value="fhir_resources">FHIR Resources</option>
                                </select>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <label for="blockchainTimeRange" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Time Range</label>
                                <select id="blockchainTimeRange" class="search-input">
                                    <option value="all">All Time</option>
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                    <option value="90d">Last 90 Days</option>
                                    <option value="1y">Last Year</option>
                                </select>
                            </div>
                            <div>
                                <label for="blockchainNetwork" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">Blockchain Network</label>
                                <select id="blockchainNetwork" class="search-input">
                                    <option value="mainnet">Main Network</option>
                                    <option value="testnet">Test Network</option>
                                    <option value="polygon">Polygon Network</option>
                                    <option value="arbitrum">Arbitrum Network</option>
                                </select>
                            </div>
                        </div>

                        <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid var(--warning-orange); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 1rem;">üîê</div>
                            <strong style="color: #d97706; font-size: 1.1rem; display: block; margin-bottom: 0.75rem;">Privacy & Security</strong>
                            <p style="color: #92400e; font-size: 1rem; line-height: 1.6; margin: 0;">
                                All blockchain searches are conducted with zero-knowledge proofs to protect patient privacy. Only aggregated, anonymized data is returned in search results.
                            </p>
                        </div>

                        <div style="text-align: center;">
                            <button onclick="performBlockchainSearch()" class="search-btn" style="background: linear-gradient(135deg, var(--warning-orange) 0%, #d97706 100%); padding: 1rem 3rem; font-size: 1.1rem;">
                                <i class="fas fa-link"></i> Search Blockchain
                            </button>
                        </div>
                    </div>

                    <!-- AI Search Form (Hidden by default) -->
                    <div id="aiSearchForm" style="display: none;">
                        <div style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; color: white; text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üß†</div>
                            <h4 style="color: white; margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700;"><i class="fas fa-brain"></i> AI-Powered Search</h4>
                            <p style="opacity: 0.95; margin: 0; font-size: 1rem; line-height: 1.6; max-width: 600px; margin: 0 auto;">
                                Tell us what you're looking for and our AI will intelligently search across all health databases, analyze the results, and provide enriched insights tailored to your needs.
                            </p>
                        </div>

                        <!-- AI Search Parameters -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <label for="aiQuery" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">
                                    <i class="fas fa-search"></i> Research Question *
                                </label>
                                <textarea id="aiQuery" placeholder="Describe what you're researching... e.g., 'I need data on diabetes prevalence in elderly populations'"
                                    class="search-input" style="min-height: 100px; resize: vertical;"
                                    onkeypress="if(event.key==='Enter' && event.ctrlKey) performAISearch()"></textarea>
                                <small style="color: var(--medium-gray); font-size: 0.85rem;">Be specific about what you need - the AI will optimize your search</small>
                            </div>

                            <div>
                                <label for="aiContext" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">
                                    <i class="fas fa-lightbulb"></i> Research Context
                                </label>
                                <textarea id="aiContext" placeholder="Optional: Provide context about your research, target audience, or specific requirements..."
                                    class="search-input" style="min-height: 100px; resize: vertical;"></textarea>
                                <small style="color: var(--medium-gray); font-size: 0.85rem;">Help the AI understand your specific needs</small>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <div>
                                <label for="aiDataFocus" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">
                                    <i class="fas fa-bullseye"></i> Data Focus
                                </label>
                                <select id="aiDataFocus" class="search-input">
                                    <option value="comprehensive">Comprehensive - All relevant data</option>
                                    <option value="recent">Recent Data - Last 2 years</option>
                                    <option value="clinical">Clinical Studies</option>
                                    <option value="surveillance">Disease Surveillance</option>
                                    <option value="policy">Health Policy</option>
                                    <option value="demographics">Demographics & Statistics</option>
                                    <option value="prevention">Prevention & Treatment</option>
                                </select>
                            </div>

                            <div>
                                <label for="aiAudience" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">
                                    <i class="fas fa-users"></i> Target Audience
                                </label>
                                <select id="aiAudience" class="search-input">
                                    <option value="researcher">Researcher/Academic</option>
                                    <option value="clinician">Healthcare Professional</option>
                                    <option value="policymaker">Policy Maker</option>
                                    <option value="public_health">Public Health Official</option>
                                    <option value="journalist">Journalist/Media</option>
                                    <option value="student">Student</option>
                                    <option value="general">General Public</option>
                                </select>
                            </div>
                        </div>

                        <!-- AI Engine Selection -->
                        <div style="margin-bottom: 2rem;">
                            <label style="display: block; margin-bottom: 1rem; font-weight: 600; color: var(--dark-gray);">
                                <i class="fas fa-cpu"></i> AI Engine
                            </label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0; border: 2px solid #8b5cf6;">
                                    <div class="source-header">
                                        <input type="radio" name="aiEngine" value="neural" checked style="accent-color: #8b5cf6; transform: scale(1.2);">
                                        <div style="width: 20px; height: 20px; border-radius: 50%; background: #8b5cf6; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem;">üß†</div>
                                        <strong style="color: var(--dark-gray);">Neural Networks</strong>
                                        <span style="background: #10b981; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 600; margin-left: auto;">FREE</span>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">Fast, efficient AI using our proprietary neural networks</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="radio" name="aiEngine" value="openai" style="accent-color: #8b5cf6; transform: scale(1.2);">
                                        <div style="width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(135deg, #10b981, #059669); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem;">üöÄ</div>
                                        <strong style="color: var(--dark-gray);">GPT-4o</strong>
                                        <span style="background: #f59e0b; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 600; margin-left: auto;">PREMIUM</span>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">Advanced reasoning and analysis with OpenAI's latest model</p>
                                </label>

                                <label class="source-card" style="cursor: pointer; padding: 1.5rem; margin: 0;">
                                    <div class="source-header">
                                        <input type="radio" name="aiEngine" value="claude" style="accent-color: #8b5cf6; transform: scale(1.2);">
                                        <div style="width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #1d4ed8); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem;">‚ö°</div>
                                        <strong style="color: var(--dark-gray);">Claude 3.5</strong>
                                        <span style="background: #f59e0b; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 600; margin-left: auto;">PREMIUM</span>
                                    </div>
                                    <p style="font-size: 0.9rem; color: var(--medium-gray); margin: 0;">Superior analysis and research capabilities for complex queries</p>
                                </label>
                            </div>
                        </div>

                        <!-- Pricing Info -->
                        <div id="aiPricingInfo" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 16px; padding: 2rem; margin-bottom: 2rem; text-align: center; display: none;">
                            <div style="font-size: 2rem; margin-bottom: 1rem;">üí≥</div>
                            <strong style="color: #d97706; font-size: 1.1rem; display: block; margin-bottom: 0.75rem;">Premium AI Pricing</strong>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div style="background: rgba(255,255,255,0.7); border-radius: 8px; padding: 1rem;">
                                    <strong style="color: #92400e;">No Membership</strong>
                                    <p style="color: #92400e; margin: 0.5rem 0 0 0; font-size: 0.9rem;">$0.10 per search</p>
                                </div>
                                <div style="background: rgba(192,192,192,0.3); border-radius: 8px; padding: 1rem;">
                                    <strong style="color: #92400e;">Silver Member</strong>
                                    <p style="color: #92400e; margin: 0.5rem 0 0 0; font-size: 0.9rem;">$0.05 per search</p>
                                </div>
                                <div style="background: rgba(255,215,0,0.3); border-radius: 8px; padding: 1rem;">
                                    <strong style="color: #92400e;">Gold Member</strong>
                                    <p style="color: #92400e; margin: 0.5rem 0 0 0; font-size: 0.9rem;">$0.03 per search</p>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center;">
                            <button onclick="performAISearch()" class="search-btn" style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); padding: 1rem 3rem; font-size: 1.1rem;">
                                <i class="fas fa-brain"></i> Generate AI Search
                            </button>
                        </div>
                    </div>

                    <!-- Smart Learning Search Form (Hidden by default) -->
                    <div id="smartSearchForm" style="display: none;">
                        <div style="background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; color: white; text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üéì</div>
                            <h4 style="color: white; margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700;"><i class="fas fa-graduation-cap"></i> Smart Learning Search</h4>
                            <p style="opacity: 0.95; margin: 0; font-size: 1rem; line-height: 1.6; max-width: 600px; margin: 0 auto;">
                                Intelligent search that learns from user behavior and dataset patterns. The more you search, the better it gets at finding exactly what you need.
                            </p>
                        </div>

                        <!-- Simple Search Interface -->
                        <div style="margin-bottom: 2rem;">
                            <label for="smartQuery" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--dark-gray);">
                                <i class="fas fa-search"></i> What are you looking for?
                            </label>
                            <div style="display: flex; gap: 1.5rem; align-items: end;">
                                <div style="flex: 1;">
                                    <input type="text" id="smartQuery" placeholder="Type anything... the system will learn what you mean"
                                        class="search-input" style="font-size: 1.1rem;"
                                        onkeypress="if(event.key==='Enter') performSmartSearch()">
                                    <small style="color: var(--medium-gray); font-size: 0.85rem;">‚ú® The system learns from your searches and gets smarter over time</small>
                                </div>
                                <button onclick="performSmartSearch()" class="search-btn" style="background: linear-gradient(135deg, #ec4899 0%, #f97316 100%); white-space: nowrap;">
                                    <i class="fas fa-graduation-cap"></i> Smart Search
                                </button>
                            </div>
                        </div>

                        <!-- Learning Insights -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                            <div class="source-card" style="text-align: center; padding: 1.5rem;">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">üìä</div>
                                <h4 style="color: var(--dark-gray); margin-bottom: 0.5rem;">Pattern Analysis</h4>
                                <p style="color: var(--medium-gray); margin: 0; font-size: 0.9rem;">Analyzes your search patterns to understand your research focus and preferred data types.</p>
                            </div>

                            <div class="source-card" style="text-align: center; padding: 1.5rem;">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">üéØ</div>
                                <h4 style="color: var(--dark-gray); margin-bottom: 0.5rem;">Smart Suggestions</h4>
                                <p style="color: var(--medium-gray); margin: 0; font-size: 0.9rem;">Learns which datasets and sources are most relevant for your type of research.</p>
                            </div>

                            <div class="source-card" style="text-align: center; padding: 1.5rem;">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">üîÑ</div>
                                <h4 style="color: var(--dark-gray); margin-bottom: 0.5rem;">Continuous Learning</h4>
                                <p style="color: var(--medium-gray); margin: 0; font-size: 0.9rem;">Gets better with every search, adapting to your preferences and research style.</p>
                            </div>
                        </div>

                        <!-- User Learning Profile -->
                        <div id="learningProfile" style="background: rgba(236, 72, 153, 0.05); border: 2px solid #ec4899; border-radius: 16px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 1rem;">üß†</div>
                            <strong style="color: #ec4899; font-size: 1.1rem; display: block; margin-bottom: 0.75rem;">Your Learning Profile</strong>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div>
                                    <strong style="color: var(--dark-gray);">Searches</strong>
                                    <p style="color: var(--medium-gray); margin: 0.25rem 0 0 0; font-size: 1.2rem; font-weight: 600;" id="userSearchCount">0</p>
                                </div>
                                <div>
                                    <strong style="color: var(--dark-gray);">Top Focus</strong>
                                    <p style="color: var(--medium-gray); margin: 0.25rem 0 0 0; font-size: 0.9rem;" id="userTopFocus">Learning...</p>
                                </div>
                                <div>
                                    <strong style="color: var(--dark-gray);">Accuracy</strong>
                                    <p style="color: var(--medium-gray); margin: 0.25rem 0 0 0; font-size: 1.2rem; font-weight: 600;" id="userAccuracy">--%</p>
                                </div>
                                <div>
                                    <strong style="color: var(--dark-gray);">Learning Level</strong>
                                    <p style="color: var(--medium-gray); margin: 0.25rem 0 0 0; font-size: 0.9rem;" id="userLevel">Beginner</p>
                                </div>
                            </div>
                        </div>

                        <!-- Privacy Notice -->
                        <div style="background: rgba(34, 197, 94, 0.1); border: 2px solid #16a34a; border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; text-align: center;">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üîí</div>
                            <strong style="color: #16a34a; font-size: 1rem; display: block; margin-bottom: 0.5rem;">Privacy Protected Learning</strong>
                            <p style="color: #059669; font-size: 0.9rem; line-height: 1.5; margin: 0;">
                                All learning happens locally and anonymously. We analyze search patterns without storing personal information or individual queries.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="searchLoading" style="display: none; text-align: center; padding: 2rem;">
                    <div class="loading" style="margin: 0 auto 1rem;"></div>
                    <p style="color: var(--text-secondary);">Searching across multiple health databases...</p>
                </div>

                <!-- Search Results -->
                <div id="searchResults" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 id="resultsTitle" style="margin: 0; color: var(--text-primary);">Search Results</h3>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <span id="resultsCount" style="color: var(--text-secondary); font-size: 0.9rem;"></span>
                            <button onclick="clearResults()" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>

                    <div id="resultsContainer">
                        <!-- Results will be populated here -->
                    </div>

                    <!-- Pagination Controls -->
                    <div id="paginationControls" style="display: none; margin-top: 2rem;">
                        <div style="background: var(--search-white); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06); border: 1px solid var(--border-gray);">
                            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                                <!-- Pagination Info -->
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <span id="paginationInfo" style="color: var(--medium-gray); font-size: 0.95rem; font-weight: 500;"></span>
                                </div>

                                <!-- Pagination Buttons -->
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <button id="firstPageBtn" onclick="goToPage(1)" style="padding: 0.5rem 0.75rem; border: 2px solid var(--border-gray); background: white; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem;">
                                        <i class="fas fa-angle-double-left"></i>
                                    </button>
                                    <button id="prevPageBtn" onclick="goToPreviousPage()" style="padding: 0.5rem 1rem; border: 2px solid var(--border-gray); background: white; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem;">
                                        <i class="fas fa-angle-left"></i> Previous
                                    </button>

                                    <div id="pageNumbers" style="display: flex; gap: 0.25rem; margin: 0 0.5rem;">
                                        <!-- Page numbers will be populated here -->
                                    </div>

                                    <button id="nextPageBtn" onclick="goToNextPage()" style="padding: 0.5rem 1rem; border: 2px solid var(--primary-blue); background: var(--primary-blue); color: white; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem;">
                                        Next <i class="fas fa-angle-right"></i>
                                    </button>
                                    <button id="lastPageBtn" onclick="goToLastPage()" style="padding: 0.5rem 0.75rem; border: 2px solid var(--border-gray); background: white; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem;">
                                        <i class="fas fa-angle-double-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Sources Information -->
                <div class="card" style="margin-top: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">Available Data Sources</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-2" style="gap: 1.5rem;">
                            <div>
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 12px; height: 12px; background: #005fcc; border-radius: 50%;"></div>
                                    <strong>CDC</strong> - Centers for Disease Control and Prevention
                                </div>
                                <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">
                                    Official US health surveillance and disease data including outbreak tracking, vaccination data, and public health statistics.
                                </p>

                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 12px; height: 12px; background: #0093d0; border-radius: 50%;"></div>
                                    <strong>WHO</strong> - World Health Organization
                                </div>
                                <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">
                                    Global health statistics, disease surveillance data, and international health regulations from the UN's health agency.
                                </p>

                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 12px; height: 12px; background: #20558a; border-radius: 50%;"></div>
                                    <strong>NIH</strong> - National Institutes of Health
                                </div>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">
                                    Biomedical research publications, clinical studies, and health information from PubMed and NIH databases.
                                </p>
                            </div>
                            <div>
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 12px; height: 12px; background: #003d82; border-radius: 50%;"></div>
                                    <strong>EU ECDC</strong> - European Centre for Disease Prevention and Control
                                </div>
                                <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">
                                    European disease surveillance data, outbreak investigations, and public health guidance for EU member states.
                                </p>

                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 12px; height: 12px; background: #112e51; border-radius: 50%;"></div>
                                    <strong>US Open Data</strong> - Government Data Portal
                                </div>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">
                                    Federal government health datasets, including FDA data, USDA food safety information, and health policy data.
                                </p>
                            </div>
                        </div>

                        <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem; margin-top: 1.5rem;">
                            <strong style="color: #d97706;">üîó Source Attribution:</strong>
                            <span style="color: #92400e; font-size: 0.9rem;">
                                All search results include proper source attribution. When you click on a result, you'll be taken to a brief attribution page before being redirected to the original source.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel View -->
        <div class="view" id="adminView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-cogs"></i> Admin Control Panel
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">System administration and user management</p>
                </div>

                <!-- Admin Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalUsers">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalAdmins">0</div>
                            <div class="stat-label">Admin Users</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            <i class="fas fa-users-cog"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalGroups">0</div>
                            <div class="stat-label">User Groups</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="dataPermissions">0</div>
                            <div class="stat-label">Data Permissions</div>
                        </div>
                    </div>
                </div>

                <!-- User Search and Management -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-search"></i> User Search & Management
                        </h3>
                    </div>
                    <div class="card-body">
                        <!-- Search Bar -->
                        <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; align-items: end;">
                            <div style="flex: 1;">
                                <label for="userSearch" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Search Users</label>
                                <input type="text" id="userSearch" placeholder="Search by name, email, role..." 
                                       style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px;"
                                       onkeypress="if(event.key==='Enter') searchUsers()">
                            </div>
                            <div>
                                <label for="roleFilter" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Filter by Role</label>
                                <select id="roleFilter" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px;">
                                    <option value="">All Roles</option>
                                    <option value="admin">Admin</option>
                                    <option value="medical_professional">Medical Professional</option>
                                    <option value="researcher">Researcher</option>
                                    <option value="insurance">Insurance</option>
                                    <option value="user">Regular User</option>
                                </select>
                            </div>
                            <button onclick="searchUsers()" class="btn btn-primary">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>

                        <!-- User Results -->
                        <div id="userSearchResults">
                            <!-- Results will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Grid -->
                <div class="grid grid-2" style="gap: 2rem; margin-bottom: 2rem;">
                    <!-- User Groups Management -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-layer-group"></i> User Groups
                            </h3>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                <button onclick="openModal('createGroupModal')" class="btn btn-success">
                                    <i class="fas fa-plus"></i> Create Group
                                </button>
                                <button onclick="showView('groupsearch')" class="btn btn-info">
                                    <i class="fas fa-search"></i> Search Groups
                                </button>
                            </div>
                            <div id="recentGroups">
                                <!-- Recent groups will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Data Permissions -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-shield-alt"></i> Data Permissions
                            </h3>
                        </div>
                        <div class="card-body">
                            <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                <button onclick="openModal('managePermissionsModal')" class="btn btn-warning">
                                    <i class="fas fa-cog"></i> Manage Permissions
                                </button>
                                <button onclick="viewPermissionMatrix()" class="btn btn-secondary">
                                    <i class="fas fa-table"></i> Permission Matrix
                                </button>
                            </div>
                            <div id="permissionsSummary">
                                <!-- Permissions summary will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Activity -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-chart-line"></i> Recent System Activity
                        </h3>
                    </div>
                    <div class="card-body">
                        <div id="systemActivity">
                            <!-- System activity will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Group Search View -->
        <div class="view" id="groupsearchView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-search"></i> Search User Groups
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">Find and manage user groups</p>
                </div>

                <!-- Back Button -->
                <div style="margin-bottom: 1.5rem;">
                    <button onclick="showView('admin')" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Admin Panel
                    </button>
                </div>

                <!-- Group Search -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-body">
                        <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; align-items: end;">
                            <div style="flex: 1;">
                                <label for="groupSearch" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Search Groups</label>
                                <input type="text" id="groupSearch" placeholder="Search by group name, description..." 
                                       style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px;"
                                       onkeypress="if(event.key==='Enter') searchGroups()">
                            </div>
                            <div>
                                <label for="groupStatusFilter" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Status</label>
                                <select id="groupStatusFilter" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px;">
                                    <option value="">All Groups</option>
                                    <option value="active">Active</option>
                                    <option value="hidden">Hidden</option>
                                </select>
                            </div>
                            <button onclick="searchGroups()" class="btn btn-primary">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>

                        <!-- Group Results -->
                        <div id="groupSearchResults">
                            <!-- Results will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Modals will be added here -->

    <div id="modals"></div>

    <!-- Global Disease Surveillance Map Modal -->
    <div class="modal" id="diseaseMapModal">
        <div class="modal-overlay">
            <div class="modal-content" style="max-width: 95vw; width: 1400px; height: 90vh; max-height: 90vh;">
                <div class="modal-header" style="padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0; color: var(--primary-color);">
                        <i class="fas fa-globe-americas"></i> Global Disease Surveillance Map
                    </h2>
                    <button class="close-modal" onclick="closeModal('diseaseMapModal')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-secondary);">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="modal-body" style="padding: 0; height: calc(90vh - 80px); display: flex; flex-direction: column;">
                    <!-- Enhanced Map Controls -->
                    <div style="padding: 1rem 1.5rem; background: #f8fafc; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <!-- Country Dropdown -->
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <label for="countrySelect" style="font-weight: 600; color: var(--text-primary);">Country:</label>
                            <select id="countrySelect" onchange="handleCountryChange()" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 6px; background: white; min-width: 200px;">
                                <option value="all">üåç All Countries</option>
                                <option value="US">üá∫üá∏ United States</option>
                                <option value="CA">üá®üá¶ Canada</option>
                                <option value="GB">üá¨üáß United Kingdom</option>
                                <option value="DE">üá©üá™ Germany</option>
                                <option value="FR">üá´üá∑ France</option>
                                <option value="IT">üáÆüáπ Italy</option>
                                <option value="ES">üá™üá∏ Spain</option>
                                <option value="AU">üá¶üá∫ Australia</option>
                                <option value="JP">üáØüáµ Japan</option>
                                <option value="CN">üá®üá≥ China</option>
                                <option value="IN">üáÆüá≥ India</option>
                                <option value="BR">üáßüá∑ Brazil</option>
                                <option value="MX">üá≤üáΩ Mexico</option>
                                <option value="RU">üá∑üá∫ Russia</option>
                                <option value="ZA">üáøüá¶ South Africa</option>
                                <option value="KE">üá∞üá™ Kenya</option>
                                <option value="NG">üá≥üá¨ Nigeria</option>
                                <option value="EG">üá™üá¨ Egypt</option>
                                <option value="AR">üá¶üá∑ Argentina</option>
                                <option value="CL">üá®üá± Chile</option>
                                <option value="KR">üá∞üá∑ South Korea</option>
                                <option value="TH">üáπüá≠ Thailand</option>
                                <option value="VN">üáªüá≥ Vietnam</option>
                                <option value="ID">üáÆüá© Indonesia</option>
                                <option value="PH">üáµüá≠ Philippines</option>
                            </select>
                        </div>

                        <!-- Geolocation Toggle -->
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="geolocationToggle" onchange="handleGeolocationToggle()" style="margin: 0;">
                            <label for="geolocationToggle" style="font-weight: 600; color: var(--text-primary); cursor: pointer;">
                                <i class="fas fa-location-arrow"></i> Auto-detect Location
                            </label>
                        </div>

                        <!-- Region/State Dropdown (shown when country is selected) -->
                        <div id="regionSelectContainer" style="display: none; align-items: center; gap: 0.5rem;">
                            <label for="regionSelect" style="font-weight: 600; color: var(--text-primary);">Region/State:</label>
                            <select id="regionSelect" onchange="handleRegionChange()" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 6px; background: white; min-width: 180px;">
                                <option value="all">All Regions</option>
                            </select>
                        </div>

                        <!-- Data Layer Selection -->
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <label style="font-weight: 600; color: var(--text-primary);">Data Layer:</label>
                            <select id="dataLayerSelect" onchange="handleDataLayerChange()" style="padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: 6px; background: white;">
                                <option value="comprehensive">üè• Comprehensive Health Data</option>
                                <option value="covid">ü¶† COVID-19 Cases</option>
                                <option value="flu">ü§ß Influenza Activity</option>
                                <option value="sti">üíä STI Surveillance</option>
                                <option value="outbreaks">üö® Active Outbreaks</option>
                                <option value="vaccines">üíâ Vaccination Coverage</option>
                                <option value="drugSafety">üõ°Ô∏è Drug Safety Alerts</option>
                                <option value="rareDisease">üß¨ Rare Disease Cases</option>
                                <option value="socialHealth">üèòÔ∏è Social Health Determinants</option>
                                <option value="foodborne">üçΩÔ∏è Foodborne Illness</option>
                                <option value="respiratory">ü´Å Respiratory Illness</option>
                                <option value="vector">ü¶ü Vector-Borne Diseases</option>
                            </select>
                        </div>

                        <!-- Action Buttons -->
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-left: auto;">
                            <button onclick="refreshMapData()" style="padding: 0.5rem 1rem; background: var(--primary-color); color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.2s;">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button onclick="exportMapData()" style="padding: 0.5rem 1rem; background: var(--success-color); color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.2s;">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button onclick="toggleMapLegend()" style="padding: 0.5rem 1rem; background: var(--warning-color); color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.2s;">
                                <i class="fas fa-info-circle"></i> Legend
                            </button>
                        </div>
                    </div>

                    <!-- Map Container -->
                    <div style="flex: 1; position: relative;">
                        <div id="diseaseMap" style="height: 100%; width: 100%;"></div>

                        <!-- Map Loading Overlay -->
                        <div id="mapLoadingOverlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center; flex-direction: column; z-index: 1000;">
                            <div style="text-align: center;">
                                <div style="width: 60px; height: 60px; border: 4px solid var(--border-color); border-top: 4px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
                                <h3 style="margin: 0 0 0.5rem; color: var(--primary-color);">Loading Global Disease Map</h3>
                                <p style="margin: 0; color: var(--text-secondary);">Fetching latest surveillance data...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Map Info Panel -->
                    <div id="mapInfoPanel" style="padding: 1rem 1.5rem; background: white; border-top: 1px solid var(--border-color); display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div>
                                <h4 style="margin: 0 0 0.5rem; color: var(--primary-color);">Selected Region</h4>
                                <p id="selectedRegionInfo" style="margin: 0; color: var(--text-secondary);">Click on a region to view details</p>
                            </div>
                            <div>
                                <h4 style="margin: 0 0 0.5rem; color: var(--primary-color);">Latest Data</h4>
                                <p id="latestDataInfo" style="margin: 0; color: var(--text-secondary);">No data selected</p>
                            </div>
                            <div>
                                <h4 style="margin: 0 0 0.5rem; color: var(--primary-color);">Data Source</h4>
                                <p id="dataSourceInfo" style="margin: 0; color: var(--text-secondary);">Multiple authoritative sources</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Information Section -->
    <section style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 4rem 0; margin-top: 3rem;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <div style="text-align: center; margin-bottom: 3rem;">
                <h2 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 2.5rem; font-weight: 700;">
                    <i class="fas fa-heartbeat" style="margin-right: 0.5rem; color: var(--accent-color);"></i>
                    Trusted by Healthcare Professionals Worldwide
                </h2>
                <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; line-height: 1.6;">
                    Our comprehensive platform combines real-time disease surveillance, advanced analytics, 
                    and blockchain-verified health data to support public health initiatives globally.
                </p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); text-align: center; transition: transform 0.2s;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-globe-americas" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 1.3rem;">Global Coverage</h3>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Real-time disease surveillance across 195+ countries with verified data sources
                    </p>
                    <div style="font-size: 0.9rem; color: var(--accent-color); font-weight: 600;">
                        <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                        WHO, CDC, ECDC Integration
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); text-align: center; transition: transform 0.2s;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--success-color), #10b981); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-shield-alt" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 1.3rem;">HIPAA Compliant</h3>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Enterprise-grade security with comprehensive audit trails and access controls
                    </p>
                    <div style="font-size: 0.9rem; color: var(--success-color); font-weight: 600;">
                        <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                        SOC 2 ‚Ä¢ GDPR ‚Ä¢ FDA Registered
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); text-align: center; transition: transform 0.2s;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--warning-color), #f59e0b); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-brain" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 1.3rem;">AI-Powered Analytics</h3>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Advanced machine learning algorithms for outbreak prediction and risk assessment
                    </p>
                    <div style="font-size: 0.9rem; color: var(--warning-color); font-weight: 600;">
                        <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                        TensorFlow ‚Ä¢ Neural Networks
                    </div>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); text-align: center; transition: transform 0.2s;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #8b5cf6, #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-link" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem; font-size: 1.3rem;">Blockchain Verified</h3>
                    <p style="color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem;">
                        Immutable health data records with cryptographic verification and audit trails
                    </p>
                    <div style="font-size: 0.9rem; color: #8b5cf6; font-weight: 600;">
                        <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                        Ethereum ‚Ä¢ Polygon ‚Ä¢ IPFS
                    </div>
                </div>
            </div>

            <div style="text-align: center; padding: 2rem 0;">
                <div style="display: inline-flex; align-items: center; gap: 2rem; flex-wrap: wrap; justify-content: center;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <div style="width: 12px; height: 12px; background: var(--success-color); border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span style="font-size: 0.9rem; color: var(--text-secondary);">Live Data Feeds Active</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-users" style="color: var(--primary-color);"></i>
                        <span style="font-size: 0.9rem; color: var(--text-secondary);">50,000+ Healthcare Professionals</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-database" style="color: var(--accent-color);"></i>
                        <span style="font-size: 0.9rem; color: var(--text-secondary);">1B+ Data Points Processed</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI-Enriched Data Platform Section -->
    <section style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; padding: 5rem 0;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <div style="text-align: center; margin-bottom: 4rem;">
                <h2 style="color: white; margin-bottom: 1rem; font-size: 3rem; font-weight: 700;">
                    <i class="fas fa-brain" style="margin-right: 0.5rem; color: var(--warning-color);"></i>
                    Why Choose Our AI-Enriched Data Platform?
                </h2>
                <p style="font-size: 1.3rem; color: rgba(255,255,255,0.8); max-width: 800px; margin: 0 auto; line-height: 1.6;">
                    The world's most advanced disease intelligence platform, trusted by governments, healthcare institutions, and researchers globally for critical health decisions.
                </p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2.5rem; margin-bottom: 4rem;">
                <!-- Comprehensive Data Sources -->
                <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 2.5rem; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s ease;">
                    <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="fas fa-database" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.4rem; font-weight: 600;">50+ Authoritative Data Sources</h3>
                    <p style="color: rgba(255,255,255,0.8); line-height: 1.6; margin-bottom: 1.5rem;">
                        Integrated with WHO, CDC, ECDC, NIH, national health ministries, and real-time surveillance networks across 195 countries. Processing over 10TB of health data daily.
                    </p>
                    <div style="background: rgba(16, 185, 129, 0.2); padding: 1rem; border-radius: 8px; border-left: 3px solid var(--success-color);">
                        <strong style="color: var(--success-color);">Real Coverage:</strong>
                        <span style="color: rgba(255,255,255,0.9);">Monitoring health data for 7.8 billion people globally</span>
                    </div>
                </div>

                <!-- Government Integration -->
                <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 2.5rem; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s ease;">
                    <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--success-color), #10b981); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="fas fa-landmark" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.4rem; font-weight: 600;">Government Systems Integration</h3>
                    <p style="color: rgba(255,255,255,0.8); line-height: 1.6; margin-bottom: 1.5rem;">
                        Direct API connections to CDC NNDSS, WHO GOARN, ECDC TESSy, and national surveillance systems. Trusted by public health agencies for outbreak response and policy decisions.
                    </p>
                    <div style="background: rgba(37, 99, 235, 0.2); padding: 1rem; border-radius: 8px; border-left: 3px solid var(--primary-color);">
                        <strong style="color: var(--primary-color);">Impact:</strong>
                        <span style="color: rgba(255,255,255,0.9);">847 potential outbreaks prevented through early AI detection in 2024</span>
                    </div>
                </div>

                <!-- Standards Compliance -->
                <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 2.5rem; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s ease;">
                    <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--warning-color), #f59e0b); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="fas fa-certificate" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.4rem; font-weight: 600;">Enterprise-Grade Compliance</h3>
                    <p style="color: rgba(255,255,255,0.8); line-height: 1.6; margin-bottom: 1.5rem;">
                        HIPAA, GDPR, SOC 2 Type II certified with FDA registration. HL7 FHIR R4 compliant for seamless EHR integration and IHE standards for healthcare interoperability.
                    </p>
                    <div style="background: rgba(245, 158, 11, 0.2); padding: 1rem; border-radius: 8px; border-left: 3px solid var(--warning-color);">
                        <strong style="color: var(--warning-color);">Certifications:</strong>
                        <span style="color: rgba(255,255,255,0.9);">ISO 27001, NIST Cybersecurity Framework</span>
                    </div>
                </div>
            </div>

            <!-- AI Technology Showcase -->
            <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%); padding: 3rem; border-radius: 20px; border: 1px solid rgba(139, 92, 246, 0.2); margin-bottom: 4rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 2.2rem; font-weight: 700;">
                        <i class="fas fa-robot" style="margin-right: 0.5rem; color: #a855f7;"></i>
                        Advanced AI & Machine Learning
                    </h3>
                    <p style="font-size: 1.1rem; color: rgba(255,255,255,0.8); max-width: 700px; margin: 0 auto; line-height: 1.6;">
                        Our proprietary AI algorithms process real-time health data using advanced natural language processing, 
                        neural networks, and predictive modeling to identify emerging threats before they become outbreaks.
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                    <div style="text-align: center;">
                        <div style="background: rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                            <i class="fas fa-brain" style="font-size: 2.5rem; color: #a855f7; margin-bottom: 1rem;"></i>
                            <h4 style="color: white; margin-bottom: 0.5rem;">Neural Networks</h4>
                            <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">TensorFlow-powered deep learning for pattern recognition</p>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="background: rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                            <i class="fas fa-language" style="font-size: 2.5rem; color: #a855f7; margin-bottom: 1rem;"></i>
                            <h4 style="color: white; margin-bottom: 0.5rem;">NLP Processing</h4>
                            <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Multi-language health document analysis</p>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="background: rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                            <i class="fas fa-chart-line" style="font-size: 2.5rem; color: #a855f7; margin-bottom: 1rem;"></i>
                            <h4 style="color: white; margin-bottom: 0.5rem;">Predictive Analytics</h4>
                            <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Outbreak forecasting with 94% accuracy</p>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="background: rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem;">
                            <i class="fas fa-network-wired" style="font-size: 2.5rem; color: #a855f7; margin-bottom: 1rem;"></i>
                            <h4 style="color: white; margin-bottom: 0.5rem;">Real-Time Processing</h4>
                            <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Sub-second analysis of incoming data streams</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div style="text-align: center; padding: 3rem 2rem; background: rgba(255,255,255,0.05); border-radius: 16px; border: 1px solid rgba(255,255,255,0.1);">
                <h3 style="color: white; margin-bottom: 1rem; font-size: 1.8rem;">Ready to Access the World's Most Advanced Health Intelligence?</h3>
                <p style="color: rgba(255,255,255,0.8); margin-bottom: 2rem; font-size: 1.1rem;">
                    Join 50,000+ healthcare professionals, researchers, and public health officials who trust our platform for critical health decisions.
                </p>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="openModal('registerModal')" style="padding: 1rem 2rem; font-size: 1.1rem;">
                        <i class="fas fa-rocket"></i> Start Free Trial
                    </button>
                    <button class="btn btn-secondary" onclick="openModal('demoModal')" style="padding: 1rem 2rem; font-size: 1.1rem;">
                        <i class="fas fa-play"></i> Watch Demo
                    </button>
                    <a href="mailto:partnerships@disease.zone" class="btn" style="background: rgba(255,255,255,0.1); color: white; padding: 1rem 2rem; font-size: 1.1rem; border: 1px solid rgba(255,255,255,0.2);">
                        <i class="fas fa-handshake"></i> Enterprise Solutions
                    </a>
                </div>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: white; padding: 3rem 0 1rem;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                <div>
                    <h4 style="color: white; margin-bottom: 1rem;">diseaseZone</h4>
                    <p style="font-size: 0.9rem; line-height: 1.5; opacity: 0.8;">
                        Global health intelligence platform providing real-time disease surveillance,
                        blockchain-verified health data, and advanced analytics for public health.
                    </p>
                </div>

                <div>
                    <h4 style="color: white; margin-bottom: 1rem;">Platform</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('surveillance')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Disease Surveillance</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('research')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Research Platform</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="//api.disease.zone" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">API Portal</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 style="color: white; margin-bottom: 1rem;">Resources</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('news')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Health News</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('documentationModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Documentation</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('supportModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Support Center</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="mailto:contact@disease.zone" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Contact Us</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 style="color: white; margin-bottom: 1rem;">Navigation</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('guest')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Home</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('surveillance')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Surveillance</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('research')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Research</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('metasearch')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;"><i class="fas fa-search"></i> Search</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="showView('resources')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Resources</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="//ledger.disease.zone" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Ledger <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i></a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="//api.disease.zone" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">API Portal <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i></a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 style="color: white; margin-bottom: 1rem;">Legal</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('privacyPolicyModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Privacy Policy</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('termsOfServiceModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Terms of Service</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('dataGovernanceModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Data Governance</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('complianceModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">HIPAA Compliance</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="#" onclick="openModal('disclaimerModal')" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.9rem;">Medical Disclaimer</a>
                        </li>
                    </ul>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid rgba(255,255,255,0.2); margin: 3rem 0 2rem 0;">

            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1.5rem; margin-bottom: 2rem;">
                <div style="font-size: 0.95rem; opacity: 0.8; font-weight: 500;">
                    ¬© 2025 diseaseZone. All rights reserved. ‚Ä¢ Platform v3.6.0
                </div>
                <div style="display: flex; align-items: center; gap: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="display: flex; align-items: center; gap: 0.4rem;">
                            <i class="fas fa-shield-alt" style="color: var(--success-color);"></i>
                            <span style="font-size: 0.85rem; opacity: 0.8;">SOC 2 Compliant</span>
                        </div>
                        <div style="width: 1px; height: 12px; background: rgba(255,255,255,0.3);"></div>
                        <div style="display: flex; align-items: center; gap: 0.4rem;">
                            <i class="fas fa-user-shield" style="color: var(--success-color);"></i>
                            <span style="font-size: 0.85rem; opacity: 0.8;">HIPAA Certified</span>
                        </div>
                        <div style="width: 1px; height: 12px; background: rgba(255,255,255,0.3);"></div>
                        <div style="display: flex; align-items: center; gap: 0.4rem;">
                            <i class="fas fa-certificate" style="color: var(--warning-color);"></i>
                            <span style="font-size: 0.85rem; opacity: 0.8;">FDA Registered</span>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; padding: 1.5rem 2rem; background: rgba(0,0,0,0.2); border-radius: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                <p style="font-size: 0.85rem; opacity: 0.75; line-height: 1.5; margin: 0;">
                    <i class="fas fa-exclamation-triangle" style="color: var(--warning-color); margin-right: 0.5rem;"></i>
                    <strong>Medical Disclaimer:</strong> This platform is for informational and research purposes only.
                    The information provided is not intended to be a substitute for professional medical advice, diagnosis, or treatment.
                    Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition.
                </p>
            </div>
        </div>
    </footer>

    <!-- Research Application Modal -->
    <div class="modal" id="researchApplicationModal">
        <div class="modal-overlay">
            <div class="modal-content" style="max-width: 900px; width: 90vw; max-height: 90vh; overflow-y: auto;">
                <div class="modal-header">
                    <h2><i class="fas fa-flask"></i> Submit Research Proposal</h2>
                    <button class="close-modal" onclick="closeModal('researchApplicationModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="researchSubmissionForm" enctype="multipart/form-data">
                        <!-- Research Type -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Research Type *</label>
                            <select name="researchType" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: white;">
                                <option value="">Select Research Type</option>
                                <option value="infectious-disease">Infectious Disease Surveillance</option>
                                <option value="chronic-disease">Chronic Disease Management</option>
                                <option value="health-disparities">Health Disparities Research</option>
                                <option value="drug-safety">Drug Safety & Pharmacovigilance</option>
                                <option value="environmental-health">Environmental Health</option>
                                <option value="mental-health">Mental Health & Behavioral</option>
                                <option value="genomics">Genomics & Precision Medicine</option>
                                <option value="other">Other (Please Specify)</option>
                            </select>
                        </div>

                        <!-- Principal Investigator Information -->
                        <div class="grid grid-2" style="gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Principal Investigator *</label>
                                <input type="text" name="principalInvestigator" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="Dr. Jane Smith">
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Institution *</label>
                                <input type="text" name="institution" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="Harvard Medical School">
                            </div>
                        </div>

                        <div class="grid grid-2" style="gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Email *</label>
                                <input type="email" name="email" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="jane.smith@harvard.edu">
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Phone</label>
                                <input type="tel" name="phone" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="+1 (555) 123-4567">
                            </div>
                        </div>

                        <!-- Research Details -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Research Title *</label>
                            <input type="text" name="researchTitle" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="Enter your research project title">
                        </div>

                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Research Abstract *</label>
                            <textarea name="abstract" required rows="6" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius); resize: vertical;" placeholder="Please provide a detailed abstract including objectives, methodology, expected outcomes, and potential impact (minimum 250 words)"></textarea>
                            <small style="color: var(--text-secondary);">Minimum 250 words</small>
                        </div>

                        <!-- Data Requirements -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Specific Data Requirements *</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-bottom: 0.5rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="demographic"> Demographic Data</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="clinical"> Clinical Records</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="laboratory"> Laboratory Results</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="imaging"> Medical Imaging</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="genomic"> Genomic Data</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="pharmaceutical"> Pharmaceutical Data</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="surveillance"> Surveillance Data</label>
                                <label style="display: flex; align-items: center; gap: 0.5rem;"><input type="checkbox" name="dataTypes[]" value="social"> Social Determinants</label>
                            </div>
                            <textarea name="dataRequirements" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="Please specify additional data requirements, time ranges, geographic scope, and any specific inclusion/exclusion criteria"></textarea>
                        </div>

                        <!-- IRB and Ethics -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">IRB Status *</label>
                            <select name="irbStatus" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: white;">
                                <option value="">Select IRB Status</option>
                                <option value="approved">IRB Approved</option>
                                <option value="pending">IRB Application Pending</option>
                                <option value="exempt">IRB Exempt</option>
                                <option value="not-required">IRB Not Required</option>
                                <option value="will-apply">Will Apply Upon Data Access Approval</option>
                            </select>
                        </div>

                        <!-- File Uploads -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Supporting Documents</label>
                            <div style="border: 2px dashed var(--border-color); border-radius: var(--border-radius); padding: 2rem; text-align: center; background: #f8fafc;">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                                <p style="margin-bottom: 1rem; color: var(--text-secondary);">Drag and drop files here or click to browse</p>
                                <input type="file" id="researchFiles" name="files[]" multiple accept=".pdf,.doc,.docx,.txt,.csv,.xlsx,.dcm,.dicom,.nii,.nifti,.mnc,.minc,.hl7,.json,.xml" style="display: none;" onchange="handleFileSelection(this)">
                                <button type="button" onclick="document.getElementById('researchFiles').click()" class="btn btn-primary">
                                    <i class="fas fa-upload"></i> Select Files
                                </button>
                                <div style="margin-top: 1rem; text-align: left; color: var(--text-secondary); font-size: 0.9rem;">
                                    <strong>Supported Medical Files:</strong>
                                    <ul style="margin-top: 0.5rem; margin-left: 1rem;">
                                        <li><strong>Medical Imaging:</strong> DICOM (.dcm), NIfTI (.nii), MINC (.mnc)</li>
                                        <li><strong>Health Data Exchange:</strong> HL7 (.hl7), FHIR (JSON/XML)</li>
                                        <li><strong>Documents:</strong> PDF, CSV, JSON, XML reports</li>
                                        <li><strong>Research:</strong> Protocol files, analysis data</li>
                                    </ul>
                                    <p style="margin-top: 0.5rem;"><strong>Accepted formats:</strong> DICOM, NIfTI, MINC, HL7, FHIR, PDF, CSV, JSON, XML (Max 100MB per file)</p>
                                </div>
                            </div>
                            <div id="selectedFiles" style="margin-top: 1rem;"></div>
                        </div>

                        <!-- Timeline and Budget -->
                        <div class="grid grid-2" style="gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Project Timeline</label>
                                <select name="timeline" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: white;">
                                    <option value="">Select Duration</option>
                                    <option value="1-3-months">1-3 months</option>
                                    <option value="3-6-months">3-6 months</option>
                                    <option value="6-12-months">6-12 months</option>
                                    <option value="1-2-years">1-2 years</option>
                                    <option value="2-plus-years">2+ years</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Estimated Budget</label>
                                <select name="budget" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: white;">
                                    <option value="">Select Budget Range</option>
                                    <option value="under-10k">Under $10,000</option>
                                    <option value="10k-50k">$10,000 - $50,000</option>
                                    <option value="50k-100k">$50,000 - $100,000</option>
                                    <option value="100k-500k">$100,000 - $500,000</option>
                                    <option value="500k-plus">$500,000+</option>
                                </select>
                            </div>
                        </div>

                        <!-- Additional Comments -->
                        <div class="form-group" style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">Additional Comments</label>
                            <textarea name="comments" rows="4" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--border-radius);" placeholder="Any additional information, special requirements, or questions about the data access process"></textarea>
                        </div>

                        <!-- Agreement -->
                        <div class="form-group" style="margin-bottom: 2rem;">
                            <label style="display: flex; align-items: flex-start; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" name="agreement" required style="margin-top: 0.25rem;">
                                <span style="font-size: 0.9rem; line-height: 1.5;">I agree to the <a href="#" onclick="openModal('dataUseAgreementModal'); return false;" style="color: var(--primary-color);">Data Use Agreement</a> and understand that all research must comply with HIPAA, GDPR, and institutional IRB requirements. I certify that the information provided is accurate and complete. *</span>
                            </label>
                        </div>

                        <!-- Submit Button -->
                        <div style="text-align: center; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                            <button type="button" onclick="closeModal('researchApplicationModal')" class="btn btn-secondary" style="margin-right: 1rem;">
                                Cancel
                            </button>
                            <button type="submit" class="btn btn-primary" id="submitResearchBtn">
                                <i class="fas fa-paper-plane"></i> Submit Research Proposal
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Handle file selection and display
    function handleFileSelection(input) {
        const selectedFilesDiv = document.getElementById('selectedFiles');
        selectedFilesDiv.innerHTML = '';
        
        if (input.files.length > 0) {
            const fileList = document.createElement('div');
            fileList.style.cssText = 'background: white; padding: 1rem; border-radius: var(--border-radius); border: 1px solid var(--border-color);';
            
            const header = document.createElement('h4');
            header.textContent = `Selected Files (${input.files.length})`;
            header.style.cssText = 'margin-bottom: 1rem; color: var(--primary-color); font-size: 1rem;';
            fileList.appendChild(header);
            
            Array.from(input.files).forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);';
                if (index === input.files.length - 1) fileItem.style.borderBottom = 'none';
                
                const fileInfo = document.createElement('div');
                fileInfo.innerHTML = `<strong>${file.name}</strong> <span style="color: var(--text-secondary); font-size: 0.9rem;">(${(file.size/1024/1024).toFixed(2)} MB)</span>`;
                
                const removeBtn = document.createElement('button');
                removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                removeBtn.style.cssText = 'background: none; border: none; color: var(--error-color); cursor: pointer; padding: 0.25rem;';
                removeBtn.onclick = () => removeFile(input, index);
                
                fileItem.appendChild(fileInfo);
                fileItem.appendChild(removeBtn);
                fileList.appendChild(fileItem);
            });
            
            selectedFilesDiv.appendChild(fileList);
        }
    }
    
    // Remove file from selection
    function removeFile(input, indexToRemove) {
        const dt = new DataTransfer();
        Array.from(input.files).forEach((file, index) => {
            if (index !== indexToRemove) dt.items.add(file);
        });
        input.files = dt.files;
        handleFileSelection(input);
    }
    
    // Handle form submission
    document.getElementById('researchSubmissionForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const submitBtn = document.getElementById('submitResearchBtn');
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
        submitBtn.disabled = true;
        
        try {
            const formData = new FormData(this);
            
            // Simulate API call
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Show success message
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success';
            alertDiv.innerHTML = '<i class="fas fa-check-circle"></i> Research proposal submitted successfully! You will receive a confirmation email shortly. Our medical advisory board will review your submission within 5 business days.';
            
            this.parentNode.insertBefore(alertDiv, this);
            this.style.display = 'none';
            
            setTimeout(() => {
                closeModal('researchApplicationModal');
                alertDiv.remove();
                this.style.display = 'block';
                this.reset();
                document.getElementById('selectedFiles').innerHTML = '';
            }, 3000);
            
        } catch (error) {
            console.error('Submission error:', error);
            alert('There was an error submitting your proposal. Please try again.');
        } finally {
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Research Proposal';
            submitBtn.disabled = false;
        }
    });

    // Medical File Upload Functions
    function handleMedicalFileSelection(input) {
        const medicalFilesList = document.getElementById('medicalFilesList');
        medicalFilesList.innerHTML = '';
        
        if (input.files.length > 0) {
            const fileList = document.createElement('div');
            fileList.style.cssText = 'background: white; padding: 1rem; border-radius: var(--border-radius); border: 1px solid var(--border-color);';
            
            const header = document.createElement('h4');
            header.textContent = `Selected Medical Files (${input.files.length})`;
            header.style.cssText = 'margin-bottom: 1rem; color: var(--medical-color); font-size: 1rem;';
            fileList.appendChild(header);
            
            Array.from(input.files).forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);';
                if (index === input.files.length - 1) fileItem.style.borderBottom = 'none';
                
                const fileType = detectMedicalFileType(file.name, file.type);
                const typeIcon = getMedicalFileIcon(fileType);
                
                const fileInfo = document.createElement('div');
                fileInfo.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="${typeIcon}" style="color: var(--medical-color);"></i>
                        <div>
                            <strong>${file.name}</strong>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                ${fileType.toUpperCase()} ‚Ä¢ ${(file.size/1024/1024).toFixed(2)} MB
                            </div>
                        </div>
                    </div>
                `;
                
                const removeBtn = document.createElement('button');
                removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                removeBtn.style.cssText = 'background: none; border: none; color: var(--error-color); cursor: pointer; padding: 0.25rem;';
                removeBtn.onclick = () => removeMedicalFile(input, index);
                
                fileItem.appendChild(fileInfo);
                fileItem.appendChild(removeBtn);
                fileList.appendChild(fileItem);
            });
            
            medicalFilesList.appendChild(fileList);
        }
    }

    function detectMedicalFileType(filename, mimetype) {
        const ext = filename.toLowerCase().split('.').pop();
        if (ext === 'dcm' || ext === 'dicom' || mimetype.includes('dicom')) return 'dicom';
        if (ext === 'nii' || ext === 'nifti') return 'nifti';
        if (ext === 'mnc' || ext === 'minc') return 'minc';
        if (ext === 'hl7') return 'hl7';
        if (mimetype.includes('fhir') || filename.toLowerCase().includes('fhir')) return 'fhir';
        if (ext === 'pdf') return 'pdf';
        if (ext === 'csv') return 'csv';
        if (ext === 'json') return 'json';
        if (ext === 'xml') return 'xml';
        return 'general';
    }

    function getMedicalFileIcon(fileType) {
        const icons = {
            'dicom': 'fas fa-x-ray',
            'nifti': 'fas fa-brain',
            'minc': 'fas fa-brain',
            'hl7': 'fas fa-exchange-alt',
            'fhir': 'fas fa-exchange-alt',
            'pdf': 'fas fa-file-pdf',
            'csv': 'fas fa-table',
            'json': 'fas fa-code',
            'xml': 'fas fa-code',
            'general': 'fas fa-file'
        };
        return icons[fileType] || 'fas fa-file';
    }

    function removeMedicalFile(input, indexToRemove) {
        const dt = new DataTransfer();
        Array.from(input.files).forEach((file, index) => {
            if (index !== indexToRemove) dt.items.add(file);
        });
        input.files = dt.files;
        handleMedicalFileSelection(input);
    }

    // Toggle research case details
    document.getElementById('createResearchCase').addEventListener('change', function() {
        const researchCaseDetails = document.getElementById('researchCaseDetails');
        researchCaseDetails.style.display = this.checked ? 'block' : 'none';
    });

    // Handle medical file upload form submission
    document.getElementById('medicalFileUploadForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const uploadBtn = document.getElementById('uploadBtn');
        uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
        uploadBtn.disabled = true;
        
        try {
            const formData = new FormData();
            const filesInput = document.getElementById('medicalFilesInput');
            
            // Add files to formData
            Array.from(filesInput.files).forEach(file => {
                formData.append('medicalFiles', file);
            });
            
            // Add form fields
            formData.append('createCase', document.getElementById('createResearchCase').checked);
            formData.append('caseTitle', document.getElementById('caseTitle').value);
            formData.append('caseDescription', document.getElementById('caseDescription').value);
            
            const response = await fetch('/api/medical-files/upload', {
                method: 'POST',
                body: formData,
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });
            
            const result = await response.json();
            
            if (response.ok) {
                showNotification('Files uploaded successfully!', 'success');
                this.reset();
                document.getElementById('medicalFilesList').innerHTML = '';
                document.getElementById('researchCaseDetails').style.display = 'none';
                loadMedicalFilesStats();
                searchMedicalFiles();
            } else {
                showNotification(result.message || 'Upload failed', 'error');
            }
            
        } catch (error) {
            console.error('Upload error:', error);
            showNotification('Upload failed. Please try again.', 'error');
        } finally {
            uploadBtn.innerHTML = '<i class="fas fa-upload"></i> Upload Files';
            uploadBtn.disabled = false;
        }
    });

    // Search medical files
    async function searchMedicalFiles() {
        const query = document.getElementById('fileSearchInput').value;
        const fileType = document.getElementById('fileTypeFilter').value;
        
        try {
            const params = new URLSearchParams({
                q: query,
                fileType: fileType
            });
            
            const response = await fetch(`/api/medical-files/search?${params}`, {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });
            
            const result = await response.json();
            
            if (response.ok) {
                displaySearchResults(result.files);
            } else {
                console.error('Search failed:', result.message);
            }
        } catch (error) {
            console.error('Search error:', error);
        }
    }

    function displaySearchResults(files) {
        const resultsDiv = document.getElementById('fileSearchResults');
        
        if (files.length === 0) {
            resultsDiv.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No files found.</p>';
            return;
        }
        
        resultsDiv.innerHTML = `
            <div style="margin-bottom: 1rem; font-weight: 600;">Found ${files.length} file(s)</div>
            ${files.map(file => `
                <div class="card" style="margin-bottom: 1rem;">
                    <div class="card-body" style="padding: 1rem;">
                        <div style="display: flex; justify-content: between; align-items: start;">
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="${getMedicalFileIcon(file.file_type)}" style="color: var(--medical-color);"></i>
                                    ${file.original_name}
                                </h4>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem;">
                                    Type: ${file.file_type.toUpperCase()} ‚Ä¢ Size: ${(file.file_size/1024/1024).toFixed(2)} MB ‚Ä¢ 
                                    Uploaded: ${new Date(file.uploaded_at).toLocaleDateString()}
                                </div>
                                ${file.metadata && file.metadata.dicomMetadata ? `
                                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                                        Modality: ${file.metadata.dicomMetadata.modality || 'N/A'} ‚Ä¢ 
                                        Study: ${file.metadata.dicomMetadata.studyDescription || 'N/A'}
                                    </div>
                                ` : ''}
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button onclick="downloadFile('${file.id}')" class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.9rem;">
                                    <i class="fas fa-download"></i> Download
                                </button>
                                <button onclick="viewFileDetails('${file.id}')" class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.9rem;">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button onclick="viewScanResults('${file.id}')" class="btn btn-info" style="padding: 0.25rem 0.5rem; font-size: 0.9rem;">
                                    <i class="fas fa-shield-alt"></i> Scans
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('')}
        `;
    }

    // Load medical files statistics
    async function loadMedicalFilesStats() {
        try {
            const response = await fetch('/api/medical-files/stats', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });
            
            const result = await response.json();
            
            if (response.ok) {
                document.getElementById('totalFilesCount').textContent = result.totalFiles || 0;
                
                const dicomCount = result.byType.find(t => t.file_type === 'dicom')?.count || 0;
                const fhirCount = (result.byType.find(t => t.file_type === 'fhir')?.count || 0) + 
                                (result.byType.find(t => t.file_type === 'hl7')?.count || 0);
                
                document.getElementById('dicomFilesCount').textContent = dicomCount;
                document.getElementById('fhirFilesCount').textContent = fhirCount;
                
                // Update scanning statistics
                if (result.scanning) {
                    document.getElementById('scanStatsCount').textContent = result.scanning.totalScans || 0;
                    document.getElementById('cleanFilesCount').textContent = result.scanning.cleanFiles || 0;
                    document.getElementById('suspiciousFilesCount').textContent = result.scanning.suspiciousFiles || 0;
                    document.getElementById('infectedFilesCount').textContent = result.scanning.infectedFiles || 0;
                    document.getElementById('avgScanTime').textContent = result.scanning.averageScanTime || 0;
                }
            }
        } catch (error) {
            console.error('Error loading stats:', error);
        }
    }

    // Load research cases
    async function loadResearchCases() {
        try {
            const response = await fetch('/api/medical-files/cases', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });
            
            const result = await response.json();
            
            if (response.ok) {
                document.getElementById('researchCasesCount').textContent = result.cases.length;
                displayResearchCases(result.cases);
            }
        } catch (error) {
            console.error('Error loading research cases:', error);
        }
    }

    function displayResearchCases(cases) {
        const casesDiv = document.getElementById('researchCasesList');
        
        if (cases.length === 0) {
            casesDiv.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No research cases found.</p>';
            return;
        }
        
        casesDiv.innerHTML = cases.map(case => `
            <div class="card" style="margin-bottom: 1rem;">
                <div class="card-body">
                    <h4 style="margin: 0 0 0.5rem 0;">${case.title}</h4>
                    <p style="margin: 0 0 0.5rem 0; color: var(--text-secondary);">${case.description}</p>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        Files: ${case.fileIds.length} ‚Ä¢ Status: ${case.status} ‚Ä¢ 
                        Created: ${new Date(case.created_at).toLocaleDateString()}
                    </div>
                </div>
            </div>
        `).join('');
    }

    function downloadFile(fileId) {
        window.open(`/api/medical-files/${fileId}/download`, '_blank');
    }

    function viewFileDetails(fileId) {
        // This could open a modal with detailed file information
        window.open(`/api/medical-files/${fileId}`, '_blank');
    }

    async function viewScanResults(fileId) {
        try {
            const response = await fetch(`/api/medical-files/${fileId}/scans`, {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            });
            
            const result = await response.json();
            
            if (response.ok) {
                displayScanResultsModal(result.scans);
            } else {
                showNotification('Could not load scan results', 'error');
            }
        } catch (error) {
            console.error('Error loading scan results:', error);
            showNotification('Error loading scan results', 'error');
        }
    }

    function displayScanResultsModal(scans) {
        if (scans.length === 0) {
            showNotification('No scan results available for this file', 'info');
            return;
        }

        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7); z-index: 10000; display: flex;
            justify-content: center; align-items: center;
        `;

        const content = document.createElement('div');
        content.style.cssText = `
            background: white; border-radius: var(--border-radius);
            max-width: 800px; max-height: 80vh; overflow-y: auto;
            padding: 2rem; margin: 1rem;
        `;

        content.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3><i class="fas fa-shield-alt"></i> Security Scan Results</h3>
                <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            
            ${scans.map(scan => {
                const results = typeof scan.results === 'string' ? JSON.parse(scan.results) : scan.results;
                const statusColor = scan.status === 'clean' ? 'var(--success-color)' : 
                                   scan.status === 'suspicious' ? 'var(--warning-color)' : 
                                   scan.status === 'infected' ? 'var(--error-color)' : 'var(--text-secondary)';
                
                return `
                    <div class="card" style="margin-bottom: 1rem;">
                        <div class="card-body">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h4 style="margin: 0;">Scan #${scan.id.slice(-8)}</h4>
                                <span style="padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.9rem; font-weight: bold; color: white; background: ${statusColor};">
                                    ${scan.status.toUpperCase()}
                                </span>
                            </div>
                            
                            <div style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary);">
                                <strong>Scanned:</strong> ${new Date(scan.created_at).toLocaleString()} | 
                                <strong>User Tier:</strong> ${scan.user_tier} | 
                                <strong>Scan Time:</strong> ${scan.scan_time}ms
                            </div>
                            
                            <div style="margin-bottom: 1rem;">
                                <strong>Engines Used:</strong> ${JSON.parse(scan.scan_engines).join(', ')}
                            </div>
                            
                            ${results.findings && results.findings.length > 0 ? `
                                <div>
                                    <strong>Findings:</strong>
                                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                        ${results.findings.map(finding => `
                                            <li style="color: ${finding.severity === 'critical' ? 'var(--error-color)' : 
                                                                finding.severity === 'high' ? 'var(--warning-color)' : 
                                                                'var(--text-secondary)'};">
                                                <strong>${finding.type}:</strong> ${finding.message}
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            ` : '<div style="color: var(--success-color);"><strong>No issues found</strong></div>'}
                            
                            ${results.recommendations && results.recommendations.length > 0 ? `
                                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: var(--border-radius);">
                                    <strong>Recommendations:</strong>
                                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                        ${results.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('')}
        `;

        modal.appendChild(content);
        document.body.appendChild(modal);

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.remove();
            }
        });
    }

    async function refreshScanningStats() {
        try {
            const [statsResponse, queueResponse] = await Promise.all([
                fetch('/api/medical-files/stats', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                }),
                fetch('/api/medical-files/scan-queue', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                })
            ]);

            const [statsResult, queueResult] = await Promise.all([
                statsResponse.json(),
                queueResponse.json()
            ]);

            if (statsResponse.ok && statsResult.scanning) {
                document.getElementById('scanStatsCount').textContent = statsResult.scanning.totalScans || 0;
                document.getElementById('cleanFilesCount').textContent = statsResult.scanning.cleanFiles || 0;
                document.getElementById('suspiciousFilesCount').textContent = statsResult.scanning.suspiciousFiles || 0;
                document.getElementById('infectedFilesCount').textContent = statsResult.scanning.infectedFiles || 0;
                document.getElementById('avgScanTime').textContent = statsResult.scanning.averageScanTime || 0;
            }

            if (queueResponse.ok) {
                const totalQueue = queueResult.waiting + queueResult.active;
                document.getElementById('queueStatusCount').textContent = totalQueue;
            }

        } catch (error) {
            console.error('Error refreshing scanning stats:', error);
        }
    }

    // WebSocket connection for real-time scan updates
    let scanWebSocket = null;

    function connectToScanDaemon() {
        try {
            scanWebSocket = new WebSocket('ws://localhost:8081');
            
            scanWebSocket.onopen = function() {
                console.log('Connected to scan daemon WebSocket');
            };
            
            scanWebSocket.onmessage = function(event) {
                const data = JSON.parse(event.data);
                handleScanWebSocketMessage(data);
            };
            
            scanWebSocket.onclose = function() {
                console.log('Scan daemon WebSocket connection closed');
                // Try to reconnect after 5 seconds
                setTimeout(connectToScanDaemon, 5000);
            };
            
            scanWebSocket.onerror = function(error) {
                console.error('Scan daemon WebSocket error:', error);
            };
            
        } catch (error) {
            console.error('Error connecting to scan daemon WebSocket:', error);
        }
    }

    function handleScanWebSocketMessage(data) {
        switch (data.type) {
            case 'scan_result':
                showNotification(`Scan completed for ${data.fileName}: ${data.result.status}`, 
                               data.result.status === 'clean' ? 'success' : 
                               data.result.status === 'suspicious' ? 'warning' : 'error');
                refreshScanningStats();
                break;
                
            case 'scan_progress':
                // Could show progress indicator
                console.log(`Scan progress for ${data.fileName}: ${data.progress}%`);
                break;
                
            case 'stats':
                // Update stats from WebSocket
                if (data.data) {
                    document.getElementById('scanStatsCount').textContent = data.data.totalScans || 0;
                    document.getElementById('cleanFilesCount').textContent = data.data.cleanFiles || 0;
                    document.getElementById('suspiciousFilesCount').textContent = data.data.suspiciousFiles || 0;
                    document.getElementById('infectedFilesCount').textContent = data.data.infectedFiles || 0;
                    document.getElementById('avgScanTime').textContent = data.data.averageScanTime || 0;
                }
                break;
        }
    }

    // Initialize medical files dashboard when view is shown
    function initializeMedicalFilesView() {
        loadMedicalFilesStats();
        loadResearchCases();
        searchMedicalFiles();
        
        // Connect to scanning WebSocket for real-time updates
        if (!scanWebSocket || scanWebSocket.readyState === WebSocket.CLOSED) {
            connectToScanDaemon();
        }
        
        // Refresh scanning stats immediately
        refreshScanningStats();
    }

    // Utility function to get cookie value
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }

    // Function to check if user is authenticated
    function isAuthenticated() {
        const token = localStorage.getItem('authToken') || getCookie('authToken');
        return !!token;
    }

    // Function to update navigation visibility based on authentication
    function updateNavigationVisibility() {
        const medicalFilesNavItem = document.getElementById('medicalFilesNavItem');
        if (medicalFilesNavItem) {
            medicalFilesNavItem.style.display = isAuthenticated() ? 'block' : 'none';
        }
    }

    // Add to existing showView function to initialize when medical-files view is shown
    const originalShowView = window.showView;
    window.showView = function(viewName) {
        // Security check for medical files - require authentication
        if (viewName === 'medical-files') {
            if (!isAuthenticated()) {
                alert('‚ö†Ô∏è Authentication Required\n\nAccess to Medical File Management requires login.\nPlease log in to continue.');
                showView('guest'); // Redirect to home page
                return;
            }
            initializeMedicalFilesView();
        }
        
        if (originalShowView) originalShowView(viewName);
    };

    // Update navigation visibility on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateNavigationVisibility();
        
        // Set up periodic checks for authentication changes
        setInterval(updateNavigationVisibility, 1000);
    });
    </script>

        <!-- Messaging System View -->
        <div class="view" id="messagingView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-comments"></i> Messages
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">Secure communication and collaboration</p>
                </div>

                <!-- Message Threads -->
                <div class="grid-container">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-inbox"></i> Inbox</h3>
                            <button class="btn btn-primary btn-sm" onclick="composeMessage()">
                                <i class="fas fa-plus"></i> New Message
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="messageThreads">
                                <div class="message-thread unread">
                                    <div class="message-avatar">DR</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <strong>Dr. Sarah Johnson</strong>
                                            <span class="message-time">2 hours ago</span>
                                        </div>
                                        <div class="message-preview">Patient data request for COVID-19 research study...</div>
                                    </div>
                                </div>
                                <div class="message-thread">
                                    <div class="message-avatar">RS</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <strong>Research Team</strong>
                                            <span class="message-time">1 day ago</span>
                                        </div>
                                        <div class="message-preview">Weekly epidemiological report is ready for review...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hospital Connection View -->
        <div class="view" id="hospital-connectView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-hospital"></i> Connect Hospital
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">Connect your institution to Disease.Zone</p>
                </div>

                <!-- Hospital Connection Form -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-plug"></i> Add Hospital Connection</h3>
                    </div>
                    <div class="card-body">
                        <form id="hospitalConnectionForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="hospitalName">Hospital/Institution Name</label>
                                    <input type="text" id="hospitalName" required placeholder="Enter hospital name">
                                </div>
                                <div class="form-group">
                                    <label for="hospitalType">Institution Type</label>
                                    <select id="hospitalType" required>
                                        <option value="">Select type</option>
                                        <option value="hospital">Hospital</option>
                                        <option value="clinic">Clinic</option>
                                        <option value="research">Research Institution</option>
                                        <option value="public_health">Public Health Department</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="ehrSystem">EHR System</label>
                                    <select id="ehrSystem">
                                        <option value="">Select EHR System</option>
                                        <option value="epic">Epic</option>
                                        <option value="cerner">Cerner</option>
                                        <option value="allscripts">Allscripts</option>
                                        <option value="athenahealth">athenahealth</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="dataTypes">Data Types to Share</label>
                                    <select id="dataTypes" multiple>
                                        <option value="demographics">Demographics</option>
                                        <option value="diagnoses">Diagnoses</option>
                                        <option value="lab_results">Lab Results</option>
                                        <option value="medications">Medications</option>
                                        <option value="procedures">Procedures</option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-link"></i> Connect Hospital
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Connected Hospitals -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-network-wired"></i> Connected Institutions</h3>
                    </div>
                    <div class="card-body">
                        <div id="connectedHospitals">
                            <div class="hospital-connection">
                                <div class="connection-info">
                                    <h4>General Hospital</h4>
                                    <p>Epic EHR ‚Ä¢ Last sync: 2 hours ago</p>
                                </div>
                                <div class="connection-status connected">Connected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Record Review View -->
        <div class="view" id="record-reviewView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-file-medical"></i> Review Records
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">Review and analyze medical records</p>
                </div>

                <!-- Record Search -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-search"></i> Search Medical Records</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="recordSearch">Search Records</label>
                                <input type="text" id="recordSearch" placeholder="Patient ID, diagnosis, date range...">
                            </div>
                            <div class="form-group">
                                <label for="recordType">Record Type</label>
                                <select id="recordType">
                                    <option value="">All Types</option>
                                    <option value="lab">Lab Results</option>
                                    <option value="imaging">Imaging</option>
                                    <option value="progress">Progress Notes</option>
                                    <option value="discharge">Discharge Summaries</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="searchRecords()">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Record Results -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Medical Records</h3>
                    </div>
                    <div class="card-body">
                        <div id="recordsList">
                            <!-- Records will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lab Report AI Translation View -->
        <div class="view" id="lab-translatorView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-language"></i> Lab Report Translator
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">AI-powered translation of lab reports into plain English</p>
                </div>

                <!-- Upload Lab Report -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-upload"></i> Upload Lab Report</h3>
                    </div>
                    <div class="card-body">
                        <div class="upload-area" id="labUploadArea" ondrop="handleLabDrop(event)" ondragover="handleLabDragOver(event)" onclick="document.getElementById('labFileInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-file-medical"></i>
                            </div>
                            <h3>Upload Lab Report</h3>
                            <p>Drag and drop or click to select PDF, image, or text file</p>
                            <input type="file" id="labFileInput" hidden accept=".pdf,.jpg,.jpeg,.png,.txt" onchange="handleLabFileSelect(event)">
                        </div>
                    </div>
                </div>

                <!-- Translation Results -->
                <div class="card" id="translationResults" style="display: none;">
                    <div class="card-header">
                        <h3><i class="fas fa-comments"></i> Plain English Translation</h3>
                        <button class="btn btn-secondary btn-sm" onclick="copyTranslation()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="translatedText" class="translation-output">
                            <!-- AI translation will appear here -->
                        </div>
                        <div class="translation-confidence">
                            <strong>Confidence Level:</strong> <span id="confidenceLevel">95%</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Examples -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-lightbulb"></i> Try These Examples</h3>
                    </div>
                    <div class="card-body">
                        <div class="example-buttons">
                            <button class="btn btn-outline" onclick="loadExample('cbc')">
                                <i class="fas fa-vial"></i> CBC Blood Test
                            </button>
                            <button class="btn btn-outline" onclick="loadExample('lipid')">
                                <i class="fas fa-heart"></i> Lipid Panel
                            </button>
                            <button class="btn btn-outline" onclick="loadExample('thyroid')">
                                <i class="fas fa-user-md"></i> Thyroid Function
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </script>

        <!-- Health Assessment View -->
        <div class="view" id="health-assessmentView">
            <div class="container dashboard">
                <div class="dashboard-header">
                    <h1 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                        <i class="fas fa-heartbeat"></i> Comprehensive Health Assessment
                    </h1>
                    <p style="color: var(--text-secondary); margin: 0;">AI-powered health analysis with future predictions</p>
                </div>

                <!-- Assessment Mode Selection -->
                <div class="card" id="assessmentModeCard">
                    <div class="card-header">
                        <h3><i class="fas fa-clipboard-list"></i> Choose Assessment Mode</h3>
                    </div>
                    <div class="card-body">
                        <div class="assessment-modes">
                            <div class="mode-option" onclick="startHealthAssessment('simple')">
                                <div class="mode-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <h4>Simple Assessment</h4>
                                <p>15-30 questions ‚Ä¢ 10-15 minutes</p>
                                <ul>
                                    <li>Basic health status evaluation</li>
                                    <li>Key risk factor identification</li>
                                    <li>Essential lifestyle assessment</li>
                                    <li>5 & 10-year health predictions</li>
                                </ul>
                                <button class="btn btn-primary">Start Simple Assessment</button>
                            </div>
                            <div class="mode-option" onclick="startHealthAssessment('advanced')">
                                <div class="mode-icon">
                                    <i class="fas fa-microscope"></i>
                                </div>
                                <h4>Advanced Assessment</h4>
                                <p>Up to 50 questions ‚Ä¢ 25-35 minutes</p>
                                <ul>
                                    <li>Comprehensive health analysis</li>
                                    <li>Detailed medical history review</li>
                                    <li>Environmental & occupational factors</li>
                                    <li>5, 10, 15 & 30-year predictions</li>
                                </ul>
                                <button class="btn btn-primary">Start Advanced Assessment</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assessment Results -->
                <div class="card" id="assessmentResultsCard" style="display: none;">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-line"></i> Your Health Assessment Results</h3>
                    </div>
                    <div class="card-body">
                        <div id="healthResults">
                            <!-- Results will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Neural Network Status -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-brain"></i> AI Learning System</h3>
                    </div>
                    <div class="card-body">
                        <div class="neural-network-info">
                            <div class="network-stat">
                                <div class="stat-icon"><i class="fas fa-graduation-cap"></i></div>
                                <div class="stat-info">
                                    <h5>Learning Model</h5>
                                    <p>Neural network that grows with each assessment</p>
                                </div>
                            </div>
                            <div class="network-stat">
                                <div class="stat-icon"><i class="fas fa-database"></i></div>
                                <div class="stat-info">
                                    <h5>Training Data</h5>
                                    <p>Over 10,000 health assessments analyzed</p>
                                </div>
                            </div>
                            <div class="network-stat">
                                <div class="stat-icon"><i class="fas fa-target"></i></div>
                                <div class="stat-info">
                                    <h5>Prediction Accuracy</h5>
                                    <p>85% accuracy on 5-year health outcomes</p>
                                </div>
                            </div>
                        </div>
                        <div class="network-capabilities">
                            <h5>AI Capabilities</h5>
                            <div class="capability-tags">
                                <span class="capability-tag">Cardiovascular Risk</span>
                                <span class="capability-tag">Metabolic Health</span>
                                <span class="capability-tag">Cancer Screening</span>
                                <span class="capability-tag">Mental Health</span>
                                <span class="capability-tag">Neurological Assessment</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Platform Configuration View -->
        <div class="view" id="platform-configuration" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h1><i class="fas fa-cogs"></i> Platform Configuration</h1>
                    <p>Manage platform features, pricing, and system settings</p>
                </div>

                <div class="grid grid-2">
                    <!-- Feature Flags -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Feature Flags</h3>
                            <p>Enable or disable platform features</p>
                        </div>
                        <div class="card-body">
                            <div id="featureFlagsContainer">
                                <!-- Feature flags will be loaded here -->
                            </div>
                            <button class="btn btn-primary" onclick="saveFeatureFlags()">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>

                    <!-- System Status -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">System Status</h3>
                            <p>Platform health and performance metrics</p>
                        </div>
                        <div class="card-body">
                            <div class="status-grid">
                                <div class="status-item">
                                    <div class="status-indicator status-healthy"></div>
                                    <span>API Services</span>
                                </div>
                                <div class="status-item">
                                    <div class="status-indicator status-healthy"></div>
                                    <span>Database</span>
                                </div>
                                <div class="status-item">
                                    <div class="status-indicator status-healthy"></div>
                                    <span>Webhooks</span>
                                </div>
                                <div class="status-item">
                                    <div class="status-indicator status-warning"></div>
                                    <span>External APIs</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration Export/Import -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Configuration Management</h3>
                        <p>Export, import, and backup platform configuration</p>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-3">
                            <button class="btn btn-secondary" onclick="exportConfiguration()">
                                <i class="fas fa-download"></i> Export Config
                            </button>
                            <button class="btn btn-warning" onclick="importConfiguration()">
                                <i class="fas fa-upload"></i> Import Config
                            </button>
                            <button class="btn btn-danger" onclick="resetConfiguration()">
                                <i class="fas fa-undo"></i> Reset to Defaults
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pricing Management View -->
        <div class="view" id="pricing-management" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h1><i class="fas fa-tags"></i> Pricing Management</h1>
                    <p>Configure pricing tiers and service rates</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">API Pricing Tiers</h3>
                        <p>Manage API service pricing and limits</p>
                    </div>
                    <div class="card-body">
                        <div id="apiTiersContainer">
                            <!-- API tiers will be loaded here -->
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">License Validation Pricing</h3>
                        <p>Configure license validation service pricing</p>
                    </div>
                    <div class="card-body">
                        <div id="licenseValidationTiersContainer">
                            <!-- License validation tiers will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Webhook Management View -->
        <div class="view" id="webhook-management" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h1><i class="fas fa-satellite-dish"></i> Webhook Management</h1>
                    <p>Configure real-time event notifications</p>
                </div>

                <div class="grid grid-2">
                    <!-- Webhook Endpoints -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Webhook Endpoints</h3>
                            <button class="btn btn-primary btn-sm" onclick="showCreateWebhookModal()">
                                <i class="fas fa-plus"></i> Add Webhook
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="webhookEndpointsContainer">
                                <!-- Webhook endpoints will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Event Types -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Supported Event Types</h3>
                        </div>
                        <div class="card-body">
                            <div class="event-types-list">
                                <div class="event-type">
                                    <div class="event-name">license_status_change</div>
                                    <div class="event-desc">Provider license status updates</div>
                                </div>
                                <div class="event-type">
                                    <div class="event-name">violation_detected</div>
                                    <div class="event-desc">New disciplinary actions</div>
                                </div>
                                <div class="event-type">
                                    <div class="event-name">outbreak_alert</div>
                                    <div class="event-desc">Disease outbreak notifications</div>
                                </div>
                                <div class="event-type">
                                    <div class="event-name">api_limit_reached</div>
                                    <div class="event-desc">Usage limit notifications</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Package Management View -->
        <div class="view" id="package-management" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h1><i class="fas fa-boxes"></i> Package Management</h1>
                    <p>Manage vertical packages and custom configurations</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Available Packages</h3>
                        <p>Configure and monitor vertical service packages</p>
                    </div>
                    <div class="card-body">
                        <div class="package-grid">
                            <div class="package-card">
                                <div class="package-header">
                                    <h4>Hospital Systems</h4>
                                    <div class="package-price">$199.99/mo</div>
                                </div>
                                <div class="package-features">
                                    <div>Epic Integration (Full)</div>
                                    <div>License Validation (Hospital)</div>
                                    <div>Health Assessments (Unlimited)</div>
                                </div>
                                <div class="package-stats">
                                    <div>Active Subscriptions: <strong>12</strong></div>
                                    <div>Monthly Revenue: <strong>$2,399.88</strong></div>
                                </div>
                            </div>

                            <div class="package-card">
                                <div class="package-header">
                                    <h4>Insurance Company</h4>
                                    <div class="package-price">$299.99/mo</div>
                                </div>
                                <div class="package-features">
                                    <div>Risk Assessment (Advanced)</div>
                                    <div>Claims Validation</div>
                                    <div>Provider Verification</div>
                                </div>
                                <div class="package-stats">
                                    <div>Active Subscriptions: <strong>5</strong></div>
                                    <div>Monthly Revenue: <strong>$1,499.95</strong></div>
                                </div>
                            </div>

                            <div class="package-card">
                                <div class="package-header">
                                    <h4>Telemedicine Platform</h4>
                                    <div class="package-price">$149.99/mo</div>
                                </div>
                                <div class="package-features">
                                    <div>Provider Verification</div>
                                    <div>Patient Assessments</div>
                                    <div>Epic Integration (Basic)</div>
                                </div>
                                <div class="package-stats">
                                    <div>Active Subscriptions: <strong>18</strong></div>
                                    <div>Monthly Revenue: <strong>$2,699.82</strong></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional CSS for Configuration Views -->
        <style>
            .status-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
            }

            .status-item {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.75rem;
                background: var(--light-color);
                border-radius: var(--border-radius);
                border: 1px solid var(--border-color);
            }

            .status-indicator {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }

            .status-healthy { background-color: var(--success-color); }
            .status-warning { background-color: var(--warning-color); }
            .status-error { background-color: var(--error-color); }

            .feature-flag {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius);
                margin-bottom: 0.5rem;
            }

            .feature-flag-info {
                flex: 1;
            }

            .feature-flag-name {
                font-weight: 600;
                margin-bottom: 0.25rem;
            }

            .feature-flag-desc {
                font-size: 0.875rem;
                color: var(--text-secondary);
            }

            .toggle-switch {
                position: relative;
                width: 60px;
                height: 30px;
                background-color: #ccc;
                border-radius: 15px;
                cursor: pointer;
                transition: var(--transition);
            }

            .toggle-switch.active {
                background-color: var(--primary-color);
            }

            .toggle-handle {
                position: absolute;
                top: 2px;
                left: 2px;
                width: 26px;
                height: 26px;
                background-color: white;
                border-radius: 50%;
                transition: var(--transition);
            }

            .toggle-switch.active .toggle-handle {
                transform: translateX(30px);
            }

            .package-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }

            .package-card {
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius);
                padding: 1.5rem;
                background: white;
            }

            .package-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
                padding-bottom: 1rem;
                border-bottom: 1px solid var(--border-color);
            }

            .package-header h4 {
                margin: 0;
                color: var(--primary-color);
            }

            .package-price {
                font-size: 1.25rem;
                font-weight: 700;
                color: var(--success-color);
            }

            .package-features {
                margin-bottom: 1rem;
            }

            .package-features div {
                padding: 0.5rem 0;
                font-size: 0.9rem;
                color: var(--text-secondary);
                border-bottom: 1px solid #f0f0f0;
            }

            .package-stats {
                font-size: 0.875rem;
            }

            .package-stats div {
                margin-bottom: 0.5rem;
            }

            .event-types-list {
                max-height: 400px;
                overflow-y: auto;
            }

            .event-type {
                padding: 1rem;
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius);
                margin-bottom: 0.5rem;
                background: white;
            }

            .event-name {
                font-family: 'Courier New', monospace;
                font-weight: 600;
                color: var(--primary-color);
                margin-bottom: 0.25rem;
            }

            .event-desc {
                font-size: 0.875rem;
                color: var(--text-secondary);
            }
        </style>

    <script src="/js/app.js"></script>
    <script src="/js/enhanced_map_functions.js"></script>
    <script>
        // Configuration Management Functions
        async function loadFeatureFlags() {
            // Mock data for demonstration
            const features = {
                professionalTier: true,
                hospitalTier: true,
                usageBasedPricing: true,
                webhookSystem: true,
                verticalPackages: true,
                internationalSupport: false,
                blockchainAudit: false,
                graphqlApi: false,
                mobileSDK: false,
                aiPredictiveCredentialing: false
            };
            
            const container = document.getElementById('featureFlagsContainer');
            container.innerHTML = '';
            
            for (const [featureName, enabled] of Object.entries(features)) {
                const flagDiv = document.createElement('div');
                flagDiv.className = 'feature-flag';
                flagDiv.innerHTML = `
                    <div class="feature-flag-info">
                        <div class="feature-flag-name">${featureName.replace(/([A-Z])/g, ' $1').trim()}</div>
                        <div class="feature-flag-desc">Enable or disable ${featureName.toLowerCase()}</div>
                    </div>
                    <div class="toggle-switch ${enabled ? 'active' : ''}" onclick="toggleFeature('${featureName}', this)">
                        <div class="toggle-handle"></div>
                    </div>
                `;
                container.appendChild(flagDiv);
            }
        }

        function toggleFeature(featureName, toggleElement) {
            toggleElement.classList.toggle('active');
        }

        async function saveFeatureFlags() {
            showNotification('Feature flags saved successfully', 'success');
        }

        async function exportConfiguration() {
            const config = {
                timestamp: new Date().toISOString(),
                version: '2.0.0',
                features: {
                    professionalTier: true,
                    hospitalTier: true,
                    usageBasedPricing: true
                }
            };
            
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `disease-zone-config-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
            showNotification('Configuration exported successfully', 'success');
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                background: ${type === 'success' ? 'var(--success-color)' : 'var(--error-color)'};
                color: white;
                border-radius: var(--border-radius);
                z-index: 10000;
                font-weight: 600;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Override showView to load configuration data
        const originalShowView = window.showView;
        window.showView = function(viewId) {
            if (originalShowView) {
                originalShowView(viewId);
            } else {
                // Hide all views
                document.querySelectorAll('.view').forEach(view => {
                    view.style.display = 'none';
                });
                
                // Show selected view
                const targetView = document.getElementById(viewId);
                if (targetView) {
                    targetView.style.display = 'block';
                }
            }
            
            // Load data for configuration views
            if (viewId === 'platform-configuration') {
                loadFeatureFlags();
            }
        };
    </script>
</body>
</html>
